"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/sales-dashboard/route";
exports.ids = ["app/api/sales-dashboard/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsales-dashboard%2Froute&page=%2Fapi%2Fsales-dashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsales-dashboard%2Froute.ts&appDir=D%3A%5CSales%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CSales&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsales-dashboard%2Froute&page=%2Fapi%2Fsales-dashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsales-dashboard%2Froute.ts&appDir=D%3A%5CSales%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CSales&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_Sales_app_api_sales_dashboard_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/sales-dashboard/route.ts */ \"(rsc)/./app/api/sales-dashboard/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/sales-dashboard/route\",\n        pathname: \"/api/sales-dashboard\",\n        filename: \"route\",\n        bundlePath: \"app/api/sales-dashboard/route\"\n    },\n    resolvedPagePath: \"D:\\\\Sales\\\\app\\\\api\\\\sales-dashboard\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_Sales_app_api_sales_dashboard_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/sales-dashboard/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzYWxlcy1kYXNoYm9hcmQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnNhbGVzLWRhc2hib2FyZCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnNhbGVzLWRhc2hib2FyZCUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDU2FsZXMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUQlM0ElNUNTYWxlcyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDRjtBQUMzRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWxlYXJuaW5nLXBsYXRmb3JtLz83NmUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXFNhbGVzXFxcXGFwcFxcXFxhcGlcXFxcc2FsZXMtZGFzaGJvYXJkXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zYWxlcy1kYXNoYm9hcmQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9zYWxlcy1kYXNoYm9hcmRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3NhbGVzLWRhc2hib2FyZC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXFNhbGVzXFxcXGFwcFxcXFxhcGlcXFxcc2FsZXMtZGFzaGJvYXJkXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zYWxlcy1kYXNoYm9hcmQvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsales-dashboard%2Froute&page=%2Fapi%2Fsales-dashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsales-dashboard%2Froute.ts&appDir=D%3A%5CSales%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CSales&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/sales-dashboard/route.ts":
/*!******************************************!*\
  !*** ./app/api/sales-dashboard/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _utils_excel_analyzer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/utils/excel-analyzer */ \"(rsc)/./utils/excel-analyzer.ts\");\n/* harmony import */ var groq_sdk__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! groq-sdk */ \"(rsc)/./node_modules/groq-sdk/index.mjs\");\n/* harmony import */ var _utils_json_cleaner__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../utils/json-cleaner */ \"(rsc)/./utils/json-cleaner.ts\");\n/* harmony import */ var _utils_insights_schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../utils/insights-schema */ \"(rsc)/./utils/insights-schema.ts\");\n\n\n\n\n\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const timeType = searchParams.get(\"timeType\"); // 'week', 'month', 'quarter'\n        const timeValue = searchParams.get(\"timeValue\"); // '1', 'Q1', '3'\n        const branch = searchParams.get(\"branch\"); // 'all', 'Hà Nội', 'Hồ Chí Minh', 'Đà Nẵng'\n        const year = searchParams.get(\"year\") || \"2025\";\n        const analyzer = new _utils_excel_analyzer__WEBPACK_IMPORTED_MODULE_1__.ExcelAnalyzer();\n        await analyzer.loadSalesData();\n        let filteredData = analyzer.getAllData();\n        // Lọc theo thời gian\n        if (timeType && timeValue) {\n            switch(timeType){\n                case \"week\":\n                    // Kiểm tra timeValue có phải là số không\n                    const weekNumber = parseInt(timeValue);\n                    if (isNaN(weekNumber)) {\n                        // Nếu không phải số (ví dụ: \"Q1\"), sử dụng tuần đầu tiên\n                        filteredData = filteredData.filter((item)=>item.week === 1 && item.year === parseInt(year));\n                    } else {\n                        filteredData = filteredData.filter((item)=>item.week === weekNumber && item.year === parseInt(year));\n                    }\n                    break;\n                case \"quarter\":\n                    filteredData = filteredData.filter((item)=>item.quarter === timeValue && item.year === parseInt(year));\n                    break;\n                case \"month\":\n                    // Tính tháng từ tuần (xấp xỉ)\n                    const month = parseInt(timeValue);\n                    if (isNaN(month)) {\n                        // Nếu không phải số, sử dụng tháng đầu tiên\n                        const startWeek = 1;\n                        const endWeek = 4;\n                        filteredData = filteredData.filter((item)=>item.week >= startWeek && item.week <= endWeek && item.year === parseInt(year));\n                    } else {\n                        const startWeek = (month - 1) * 4 + 1;\n                        const endWeek = month * 4;\n                        filteredData = filteredData.filter((item)=>item.week >= startWeek && item.week <= endWeek && item.year === parseInt(year));\n                    }\n                    break;\n            }\n        }\n        // Lọc theo chi nhánh\n        if (branch && branch !== \"all\") {\n            filteredData = filteredData.filter((item)=>item.branch === branch);\n        }\n        // Tính toán thống kê\n        const totalRevenue = filteredData.reduce((sum, item)=>sum + item.total_revenue, 0);\n        const totalAdCost = filteredData.reduce((sum, item)=>sum + item.ad_cost, 0);\n        const avgROI = totalAdCost > 0 ? totalRevenue / totalAdCost : 0;\n        // Phân tích theo chi nhánh\n        const branchAnalysis = {};\n        const branches = Array.from(new Set(filteredData.map((item)=>item.branch)));\n        branches.forEach((branchName)=>{\n            const branchData = filteredData.filter((item)=>item.branch === branchName);\n            const branchRevenue = branchData.reduce((sum, item)=>sum + item.total_revenue, 0);\n            const branchAdCost = branchData.reduce((sum, item)=>sum + item.ad_cost, 0);\n            const branchROI = branchAdCost > 0 ? branchRevenue / branchAdCost : 0;\n            // Nếu chỉ chọn 1 chi nhánh, percentage sẽ là 100%\n            // Nếu chọn nhiều chi nhánh, tính percentage bình thường\n            const percentage = branches.length === 1 ? 100 : branchRevenue / totalRevenue * 100;\n            branchAnalysis[branchName] = {\n                revenue: branchRevenue,\n                adCost: branchAdCost,\n                roi: branchROI,\n                percentage: percentage\n            };\n        });\n        // Phân tích theo kênh\n        const channelAnalysis = {};\n        const channels = Array.from(new Set(filteredData.map((item)=>item.channel)));\n        channels.forEach((channelName)=>{\n            const channelData = filteredData.filter((item)=>item.channel === channelName);\n            const channelRevenue = channelData.reduce((sum, item)=>sum + item.total_revenue, 0);\n            const channelAdCost = channelData.reduce((sum, item)=>sum + item.ad_cost, 0);\n            const channelROI = channelAdCost > 0 ? channelRevenue / channelAdCost : 0;\n            // Nếu chỉ chọn 1 kênh, percentage sẽ là 100%\n            // Nếu chọn nhiều kênh, tính percentage bình thường\n            const percentage = channels.length === 1 ? 100 : channelRevenue / totalRevenue * 100;\n            channelAnalysis[channelName] = {\n                revenue: channelRevenue,\n                adCost: channelAdCost,\n                roi: channelROI,\n                percentage: percentage\n            };\n        });\n        // Phân tích theo tuần (nếu có dữ liệu nhiều tuần)\n        const weeklyAnalysis = {};\n        const weeks = Array.from(new Set(filteredData.map((item)=>item.week))).sort((a, b)=>a - b);\n        weeks.forEach((week)=>{\n            const weekData = filteredData.filter((item)=>item.week === week);\n            const weekRevenue = weekData.reduce((sum, item)=>sum + item.total_revenue, 0);\n            weeklyAnalysis[week] = weekRevenue;\n        });\n        // Tạo AI insights\n        const aiInsights = await generateAIInsights({\n            totalRevenue,\n            totalAdCost,\n            avgROI,\n            branchAnalysis,\n            channelAnalysis,\n            weeklyAnalysis,\n            timeType,\n            timeValue,\n            branch,\n            year\n        });\n        const response = {\n            summary: {\n                totalRevenue,\n                totalAdCost,\n                avgROI,\n                totalRevenueFormatted: totalRevenue.toLocaleString(\"vi-VN\"),\n                totalAdCostFormatted: totalAdCost.toLocaleString(\"vi-VN\"),\n                avgROIFormatted: avgROI.toFixed(2)\n            },\n            branchAnalysis,\n            channelAnalysis,\n            weeklyAnalysis,\n            aiInsights,\n            filters: {\n                timeType,\n                timeValue,\n                branch,\n                year\n            }\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response);\n    } catch (error) {\n        console.error(\"Error generating dashboard data:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Lỗi khi tạo dữ liệu dashboard\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function generateGroqInsights(prompt) {\n    try {\n        // Check if Groq API key is available\n        if (!process.env.GROQ_API_KEY) {\n            console.log(\"Groq API key not found, using fallback analysis\");\n            return JSON.stringify({\n                overview: \"Ph\\xe2n t\\xedch dữ liệu chi nh\\xe1nh\",\n                topPerformer: \"Hiệu suất chi nh\\xe1nh\",\n                recommendations: [\n                    \"Cần cấu h\\xecnh GROQ_API_KEY để sử dụng AI ph\\xe2n t\\xedch\"\n                ],\n                risks: [\n                    \"Kh\\xf4ng thể ph\\xe2n t\\xedch AI do thiếu API key\"\n                ],\n                detailedAnalysis: [\n                    \"Sử dụng ph\\xe2n t\\xedch cơ bản\"\n                ],\n                trends: \"Xu hướng cần theo d\\xf5i\"\n            });\n        }\n        const groq = new groq_sdk__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n            apiKey: process.env.GROQ_API_KEY\n        });\n        const completion = await groq.chat.completions.create({\n            messages: [\n                {\n                    role: \"system\",\n                    content: `Bạn là chuyên gia phân tích kinh doanh cao cấp tại Việt Nam với 15+ năm kinh nghiệm. BẮT BUỘC chỉ sử dụng TIẾNG VIỆT trong toàn bộ phân tích. KHÔNG được dùng tiếng Anh.\n\nYÊU CẦU PHÂN TÍCH:\n- Phân tích sâu sắc, chi tiết và chuyên nghiệp\n- Đưa ra nhận xét cụ thể với số liệu và dữ liệu thực tế\n- Cảnh báo rủi ro dựa trên xu hướng thị trường và dữ liệu lịch sử\n- Đề xuất hành động khả thi và có tính thực tiễn cao\n- Sử dụng ngôn ngữ kinh doanh chuyên nghiệp\n\nTRẢ VỀ JSON format chính xác:\n{\n  \"overview\": \"Phân tích tổng quan chi tiết về tình hình kinh doanh, hiệu suất tổng thể, và xu hướng chính của doanh nghiệp trong giai đoạn này. Bao gồm đánh giá về doanh thu, lợi nhuận, ROI và so sánh với kỳ trước.\",\n  \"topPerformer\": \"Phân tích chi tiết về chi nhánh/kênh bán hàng có hiệu suất tốt nhất, bao gồm lý do thành công, chiến lược hiệu quả, và bài học có thể áp dụng cho các chi nhánh khác.\",\n  \"recommendations\": [\n    \"Đề xuất chiến lược cụ thể với timeline và mục tiêu rõ ràng\",\n    \"Đề xuất tối ưu hóa quy trình và cải thiện hiệu quả\",\n    \"Đề xuất phát triển thị trường và mở rộng kinh doanh\",\n    \"Đề xuất quản lý rủi ro và tài chính\"\n  ],\n  \"risks\": [\n    \"Cảnh báo rủi ro thị trường với phân tích nguyên nhân và tác động\",\n    \"Cảnh báo rủi ro tài chính và đề xuất biện pháp phòng ngừa\",\n    \"Cảnh báo rủi ro cạnh tranh và chiến lược đối phó\",\n    \"Cảnh báo rủi ro vận hành và quản lý\"\n  ],\n  \"detailedAnalysis\": [\n    \"Phân tích chi tiết hiệu suất từng chi nhánh với số liệu cụ thể\",\n    \"Phân tích xu hướng thị trường và tác động đến doanh nghiệp\",\n    \"Phân tích hiệu quả các kênh bán hàng và marketing\",\n    \"Phân tích cơ hội tăng trưởng và thách thức cần vượt qua\"\n  ],\n  \"trends\": \"Dự báo xu hướng thị trường trong 3-6 tháng tới, bao gồm cơ hội và thách thức, cùng với khuyến nghị chuẩn bị cho doanh nghiệp.\"\n}\n\nQUAN TRỌNG: \n- 100% nội dung phải bằng TIẾNG VIỆT\n- Mỗi phần phải có ít nhất 50-100 từ\n- Sử dụng ngôn ngữ kinh doanh chuyên nghiệp\n- CHỈ trả về JSON hợp lệ, không có text khác\n- Tránh lặp lại từ ngữ và cấu trúc câu`\n                },\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            model: \"llama3-8b-8192\",\n            temperature: 0.1,\n            max_tokens: 1200,\n            response_format: {\n                type: \"json_object\"\n            }\n        });\n        const response = completion.choices[0]?.message?.content || \"{}\";\n        // Kiểm tra và làm sạch response\n        if (response.includes(\"Nh\\xf3 Nh\\xf3 Nh\\xf3\") || response.includes(\"fakihuyong\") || response.includes(\"otecung\")) {\n            console.log(\"Detected repetitive text in AI response, using fallback\");\n            return JSON.stringify({\n                overview: \"Ph\\xe2n t\\xedch dữ liệu chi nh\\xe1nh với hiệu suất kinh doanh\",\n                topPerformer: \"Chi nh\\xe1nh c\\xf3 hiệu suất tốt nhất trong hệ thống\",\n                recommendations: [\n                    \"Tối ưu h\\xf3a chi ph\\xed quảng c\\xe1o\",\n                    \"Cải thiện hiệu quả k\\xeanh b\\xe1n h\\xe0ng\",\n                    \"Ph\\xe1t triển chiến lược mới\"\n                ],\n                risks: [\n                    \"Theo d\\xf5i xu hướng thị trường\",\n                    \"Kiểm so\\xe1t rủi ro t\\xe0i ch\\xednh\",\n                    \"Quản l\\xfd cạnh tranh\"\n                ],\n                detailedAnalysis: [\n                    \"Ph\\xe2n t\\xedch hiệu quả chi nh\\xe1nh\",\n                    \"Đ\\xe1nh gi\\xe1 k\\xeanh b\\xe1n h\\xe0ng\",\n                    \"Xem x\\xe9t xu hướng tuần\",\n                    \"Tối ưu h\\xf3a ROI\"\n                ],\n                trends: \"Xu hướng tăng trưởng ổn định với tiềm năng cải thiện\"\n            });\n        }\n        return response;\n    } catch (error) {\n        console.error(\"Error calling Groq API:\", error);\n        // Handle specific Groq errors\n        if (error && typeof error === \"object\" && \"error\" in error) {\n            const groqError = error;\n            if (groqError.error?.code === \"json_validate_failed\") {\n                console.log(\"JSON validation failed, trying without response_format...\");\n                // Try again without response_format as fallback\n                try {\n                    const fallbackCompletion = await new groq_sdk__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n                        apiKey: process.env.GROQ_API_KEY\n                    }).chat.completions.create({\n                        messages: [\n                            {\n                                role: \"system\",\n                                content: `Bạn là chuyên gia phân tích kinh doanh cao cấp tại Việt Nam với 15+ năm kinh nghiệm. BẮT BUỘC chỉ sử dụng TIẾNG VIỆT trong toàn bộ phân tích. KHÔNG được dùng tiếng Anh.\n\nYÊU CẦU PHÂN TÍCH:\n- Phân tích sâu sắc, chi tiết và chuyên nghiệp\n- Đưa ra nhận xét cụ thể với số liệu và dữ liệu thực tế\n- Cảnh báo rủi ro dựa trên xu hướng thị trường và dữ liệu lịch sử\n- Đề xuất hành động khả thi và có tính thực tiễn cao\n- Sử dụng ngôn ngữ kinh doanh chuyên nghiệp\n\nTRẢ VỀ JSON format chính xác:\n{\n  \"overview\": \"Phân tích tổng quan chi tiết về tình hình kinh doanh, hiệu suất tổng thể, và xu hướng chính của doanh nghiệp trong giai đoạn này. Bao gồm đánh giá về doanh thu, lợi nhuận, ROI và so sánh với kỳ trước.\",\n  \"topPerformer\": \"Phân tích chi tiết về chi nhánh/kênh bán hàng có hiệu suất tốt nhất, bao gồm lý do thành công, chiến lược hiệu quả, và bài học có thể áp dụng cho các chi nhánh khác.\",\n  \"recommendations\": [\n    \"Đề xuất chiến lược cụ thể với timeline và mục tiêu rõ ràng\",\n    \"Đề xuất tối ưu hóa quy trình và cải thiện hiệu quả\",\n    \"Đề xuất phát triển thị trường và mở rộng kinh doanh\",\n    \"Đề xuất quản lý rủi ro và tài chính\"\n  ],\n  \"risks\": [\n    \"Cảnh báo rủi ro thị trường với phân tích nguyên nhân và tác động\",\n    \"Cảnh báo rủi ro tài chính và đề xuất biện pháp phòng ngừa\",\n    \"Cảnh báo rủi ro cạnh tranh và chiến lược đối phó\",\n    \"Cảnh báo rủi ro vận hành và quản lý\"\n  ],\n  \"detailedAnalysis\": [\n    \"Phân tích chi tiết hiệu suất từng chi nhánh với số liệu cụ thể\",\n    \"Phân tích xu hướng thị trường và tác động đến doanh nghiệp\",\n    \"Phân tích hiệu quả các kênh bán hàng và marketing\",\n    \"Phân tích cơ hội tăng trưởng và thách thức cần vượt qua\"\n  ],\n  \"trends\": \"Dự báo xu hướng thị trường trong 3-6 tháng tới, bao gồm cơ hội và thách thức, cùng với khuyến nghị chuẩn bị cho doanh nghiệp.\"\n}\n\nQUAN TRỌNG: \n- 100% nội dung phải bằng TIẾNG VIỆT\n- Mỗi phần phải có ít nhất 50-100 từ\n- Sử dụng ngôn ngữ kinh doanh chuyên nghiệp\n- CHỈ trả về JSON hợp lệ, không có text khác\n- Tránh lặp lại từ ngữ và cấu trúc câu`\n                            },\n                            {\n                                role: \"user\",\n                                content: prompt\n                            }\n                        ],\n                        model: \"llama3-8b-8192\",\n                        temperature: 0.1,\n                        max_tokens: 1500\n                    });\n                    const fallbackResponse = fallbackCompletion.choices[0]?.message?.content || \"{}\";\n                    console.log(\"Fallback response received:\", fallbackResponse);\n                    return fallbackResponse;\n                } catch (fallbackError) {\n                    console.log(\"Fallback also failed:\", fallbackError);\n                }\n            } else if (groqError.error?.code === \"rate_limit_exceeded\") {\n                console.log(\"Rate limit exceeded, using fallback response\");\n            }\n        }\n        // Return fallback response\n        return JSON.stringify({\n            overview: \"Ph\\xe2n t\\xedch dữ liệu chi nh\\xe1nh với hiệu suất kinh doanh\",\n            topPerformer: \"Chi nh\\xe1nh c\\xf3 hiệu suất tốt nhất trong hệ thống\",\n            recommendations: [\n                \"Tối ưu h\\xf3a chi ph\\xed quảng c\\xe1o\",\n                \"Cải thiện hiệu quả k\\xeanh b\\xe1n h\\xe0ng\",\n                \"Ph\\xe1t triển chiến lược mới\"\n            ],\n            risks: [\n                \"Theo d\\xf5i xu hướng thị trường\",\n                \"Kiểm so\\xe1t rủi ro t\\xe0i ch\\xednh\",\n                \"Quản l\\xfd cạnh tranh\"\n            ],\n            detailedAnalysis: [\n                \"Ph\\xe2n t\\xedch hiệu quả chi nh\\xe1nh\",\n                \"Đ\\xe1nh gi\\xe1 k\\xeanh b\\xe1n h\\xe0ng\",\n                \"Xem x\\xe9t xu hướng tuần\",\n                \"Tối ưu h\\xf3a ROI\"\n            ],\n            trends: \"Xu hướng tăng trưởng ổn định với tiềm năng cải thiện\"\n        });\n    }\n}\nasync function generateAIInsights(data) {\n    const { totalRevenue, totalAdCost, avgROI, branchAnalysis, channelAnalysis, weeklyAnalysis, timeType, timeValue, branch, year } = data;\n    const insights = {\n        overview: \"\",\n        topPerformer: \"\",\n        summary: \"\",\n        recommendations: [],\n        trends: \"\",\n        risks: [],\n        detailedAnalysis: [],\n        performanceMetrics: {\n            revenueGrowth: \"Đang ph\\xe2n t\\xedch...\",\n            efficiencyScore: \"Đang ph\\xe2n t\\xedch...\",\n            marketShare: \"Đang ph\\xe2n t\\xedch...\",\n            costEffectiveness: \"Đang ph\\xe2n t\\xedch...\"\n        }\n    };\n    // === PHÂN TÍCH THÔNG MINH DỰA TRÊN DỮ LIỆU THỰC TẾ ===\n    // 1. Tính toán các ngưỡng động dựa trên dữ liệu thực tế\n    const allROIs = Object.values(branchAnalysis).map((b)=>b.roi);\n    const allRevenues = Object.values(branchAnalysis).map((b)=>b.revenue);\n    const allAdCosts = Object.values(branchAnalysis).map((b)=>b.adCost);\n    const avgROIOverall = allROIs.reduce((sum, roi)=>sum + roi, 0) / allROIs.length;\n    const maxROI = Math.max(...allROIs);\n    const minROI = Math.min(...allROIs);\n    const roiStdDev = Math.sqrt(allROIs.reduce((sum, roi)=>sum + Math.pow(roi - avgROIOverall, 2), 0) / allROIs.length);\n    const avgRevenue = allRevenues.reduce((sum, rev)=>sum + rev, 0) / allRevenues.length;\n    const maxRevenue = Math.max(...allRevenues);\n    const minRevenue = Math.min(...allRevenues);\n    // 2. Định nghĩa ngưỡng thông minh\n    const highROIThreshold = avgROIOverall + roiStdDev;\n    const lowROIThreshold = avgROIOverall - roiStdDev;\n    const exceptionalROIThreshold = avgROIOverall + roiStdDev * 1.5;\n    const highRevenueThreshold = avgRevenue + Math.sqrt(allRevenues.reduce((sum, rev)=>sum + Math.pow(rev - avgRevenue, 2), 0) / allRevenues.length);\n    const lowRevenueThreshold = avgRevenue - Math.sqrt(allRevenues.reduce((sum, rev)=>sum + Math.pow(rev - avgRevenue, 2), 0) / allRevenues.length);\n    // 3. Sử dụng Groq AI để tạo insights tự nhiên\n    const timeDescription = timeType === \"week\" ? `tuần ${timeValue}` : timeType === \"month\" ? `tháng ${timeValue}` : `quý ${timeValue}`;\n    if (branch && branch !== \"all\") {\n        // Khi chọn 1 chi nhánh cụ thể, sử dụng AI để phân tích\n        const branchData = branchAnalysis[branch];\n        // Kiểm tra branchData có tồn tại không\n        if (!branchData) {\n            console.log(`Branch data not found for: ${branch}`);\n            // Sử dụng fallback insights\n            const fallbackData = {\n                totalRevenue,\n                avgROI,\n                branch,\n                timeDescription,\n                year\n            };\n            const fallbackInsights = (0,_utils_insights_schema__WEBPACK_IMPORTED_MODULE_3__.createFallbackInsights)(fallbackData);\n            insights.overview = fallbackInsights.overview;\n            insights.topPerformer = fallbackInsights.topPerformer;\n            insights.recommendations = fallbackInsights.recommendations;\n            insights.risks = fallbackInsights.risks;\n            insights.detailedAnalysis = fallbackInsights.detailedAnalysis;\n            insights.trends = fallbackInsights.trends;\n        } else {\n            const branchRevenue = branchData.revenue;\n            const branchAdCost = branchData.adCost;\n            const branchROI = branchData.roi;\n            const revenuePerDay = branchRevenue / (timeType === \"week\" ? 7 : timeType === \"month\" ? 30 : 90);\n            const adCostRatio = branchAdCost / branchRevenue * 100;\n            // Phân tích hiệu suất tương đối với tất cả chi nhánh\n            const roiRank = allROIs.filter((roi)=>roi > branchROI).length + 1;\n            const revenueRank = allRevenues.filter((rev)=>rev > branchRevenue).length + 1;\n            const totalBranches = allROIs.length;\n            const performanceLevel = branchROI > exceptionalROIThreshold ? \"Xuất sắc\" : branchROI > highROIThreshold ? \"Tốt\" : branchROI > avgROIOverall ? \"Tr\\xean trung b\\xecnh\" : branchROI > lowROIThreshold ? \"Trung b\\xecnh\" : \"Cần cải thiện\";\n            // Tạo prompt ngắn gọn cho AI\n            const aiPrompt = `Phân tích chi nhánh ${branch}:\nDoanh thu: ${(branchRevenue / 1000000000).toFixed(2)} tỷ VND, ROI: ${branchROI.toFixed(2)} (xếp hạng ${roiRank}/${totalBranches})\nChi phí: ${(branchAdCost / 1000000).toFixed(0)} triệu VND, hiệu suất: ${performanceLevel}\nROI trung bình hệ thống: ${avgROIOverall.toFixed(2)}\nKênh: ${Object.entries(channelAnalysis).map(([channel, data])=>`${channel}(${data.percentage.toFixed(1)}%, ROI:${data.roi.toFixed(2)})`).join(\", \")}`;\n            try {\n                const aiResponse = await generateGroqInsights(aiPrompt);\n                // Sanitize JSON fallback với helper mới\n                let aiInsights;\n                try {\n                    const cleanResponse = (0,_utils_json_cleaner__WEBPACK_IMPORTED_MODULE_2__.cleanJsonResponse)(aiResponse);\n                    aiInsights = (0,_utils_json_cleaner__WEBPACK_IMPORTED_MODULE_2__.safeParse)(cleanResponse);\n                    console.log(\"AI response parsed successfully:\", aiInsights);\n                } catch (parseError) {\n                    console.log(\"AI response is not valid JSON:\", aiResponse);\n                    console.log(\"Parse error:\", parseError);\n                    // Try one more time with a more aggressive approach\n                    try {\n                        let lastAttempt = aiResponse;\n                        // Find anything that looks like JSON\n                        const matches = lastAttempt.match(/\\{[^{}]*(?:\\{[^{}]*\\}[^{}]*)*\\}/g);\n                        if (matches && matches.length > 0) {\n                            // Take the longest match that's under 5000 chars (most likely to be complete and valid)\n                            const validMatches = matches.filter((match)=>match.length < 5000);\n                            if (validMatches.length > 0) {\n                                const longestMatch = validMatches.reduce((a, b)=>a.length > b.length ? a : b);\n                                aiInsights = (0,_utils_json_cleaner__WEBPACK_IMPORTED_MODULE_2__.safeParse)(longestMatch);\n                                console.log(\"AI response parsed on second attempt:\", aiInsights);\n                            } else {\n                                aiInsights = null;\n                            }\n                        } else {\n                            aiInsights = null;\n                        }\n                    } catch (secondError) {\n                        console.log(\"Second parse attempt also failed:\", secondError);\n                        aiInsights = null;\n                    }\n                }\n                // Validate và parse với schema\n                if (aiInsights && typeof aiInsights === \"object\") {\n                    try {\n                        const validatedInsights = _utils_insights_schema__WEBPACK_IMPORTED_MODULE_3__.InsightsSchema.parse(aiInsights);\n                        insights.overview = validatedInsights.overview;\n                        insights.topPerformer = validatedInsights.topPerformer;\n                        insights.recommendations = validatedInsights.recommendations;\n                        insights.risks = validatedInsights.risks;\n                        insights.detailedAnalysis = validatedInsights.detailedAnalysis;\n                        insights.trends = validatedInsights.trends;\n                    } catch (validationError) {\n                        console.log(\"Schema validation failed, using fallback:\", validationError);\n                        // Fallback to basic analysis if AI fails\n                        const fallbackData = {\n                            totalRevenue,\n                            avgROI,\n                            branch,\n                            timeDescription,\n                            year\n                        };\n                        const fallbackInsights = (0,_utils_insights_schema__WEBPACK_IMPORTED_MODULE_3__.createFallbackInsights)(fallbackData);\n                        insights.overview = fallbackInsights.overview;\n                        insights.topPerformer = fallbackInsights.topPerformer;\n                        insights.recommendations = fallbackInsights.recommendations;\n                        insights.risks = fallbackInsights.risks;\n                        insights.detailedAnalysis = fallbackInsights.detailedAnalysis;\n                        insights.trends = fallbackInsights.trends;\n                    }\n                } else {\n                    // Fallback to basic analysis if AI fails\n                    const fallbackData = {\n                        totalRevenue,\n                        avgROI,\n                        branch,\n                        timeDescription,\n                        year\n                    };\n                    const fallbackInsights = (0,_utils_insights_schema__WEBPACK_IMPORTED_MODULE_3__.createFallbackInsights)(fallbackData);\n                    insights.overview = fallbackInsights.overview;\n                    insights.topPerformer = fallbackInsights.topPerformer;\n                    insights.recommendations = fallbackInsights.recommendations;\n                    insights.risks = fallbackInsights.risks;\n                    insights.detailedAnalysis = fallbackInsights.detailedAnalysis;\n                    insights.trends = fallbackInsights.trends;\n                }\n            } catch (error) {\n                console.error(\"Error generating AI insights:\", error);\n                // Fallback to basic analysis if AI fails\n                const fallbackData = {\n                    totalRevenue,\n                    avgROI,\n                    branch,\n                    timeDescription,\n                    year\n                };\n                const fallbackInsights = (0,_utils_insights_schema__WEBPACK_IMPORTED_MODULE_3__.createFallbackInsights)(fallbackData);\n                insights.overview = fallbackInsights.overview;\n                insights.topPerformer = fallbackInsights.topPerformer;\n                insights.recommendations = fallbackInsights.recommendations;\n                insights.risks = fallbackInsights.risks;\n                insights.detailedAnalysis = fallbackInsights.detailedAnalysis;\n                insights.trends = fallbackInsights.trends;\n            }\n        }\n    } else {\n        // Sử dụng AI cho phân tích tất cả chi nhánh\n        const revenuePerDay = totalRevenue / (timeType === \"week\" ? 7 : timeType === \"month\" ? 30 : 90);\n        const adCostRatio = totalAdCost / totalRevenue * 100;\n        const branchCount = Object.keys(branchAnalysis).length;\n        const channelCount = Object.keys(channelAnalysis).length;\n        // Phân tích phân bổ\n        const revenueDistribution = Object.values(branchAnalysis).map((b)=>b.percentage);\n        const revenueVariance = revenueDistribution.reduce((sum, p)=>sum + Math.pow(p - 100 / branchCount, 2), 0) / branchCount;\n        const distributionType = revenueVariance > 200 ? \"Tập trung cao\" : revenueVariance > 100 ? \"Tập trung vừa\" : \"C\\xe2n bằng\";\n        // Tạo prompt ngắn gọn cho AI phân tích tất cả chi nhánh\n        const allBranchesPrompt = `Phân tích hệ thống ${timeDescription} ${year}:\nTổng doanh thu: ${(totalRevenue / 1000000000).toFixed(2)} tỷ VND, ROI: ${avgROI.toFixed(2)}\nDoanh thu/ngày: ${(revenuePerDay / 1000000).toFixed(1)} triệu VND, ${branchCount} chi nhánh, ${channelCount} kênh\nChi nhánh: ${Object.entries(branchAnalysis).map(([branchName, data])=>`${branchName}(${(data.revenue / 1000000000).toFixed(2)} tỷ, ${data.percentage.toFixed(1)}%, ROI:${data.roi.toFixed(2)})`).join(\", \")}\nKênh: ${Object.entries(channelAnalysis).map(([channel, data])=>`${channel}(${data.percentage.toFixed(1)}%, ROI:${data.roi.toFixed(2)})`).join(\", \")}`;\n        try {\n            const aiResponse = await generateGroqInsights(allBranchesPrompt);\n            // Sanitize JSON fallback với helper mới\n            let aiInsights;\n            try {\n                const cleanResponse = (0,_utils_json_cleaner__WEBPACK_IMPORTED_MODULE_2__.cleanJsonResponse)(aiResponse);\n                aiInsights = (0,_utils_json_cleaner__WEBPACK_IMPORTED_MODULE_2__.safeParse)(cleanResponse);\n                console.log(\"AI response for all branches parsed successfully:\", aiInsights);\n            } catch (parseError) {\n                console.log(\"AI response for all branches is not valid JSON:\", aiResponse);\n                console.log(\"Parse error:\", parseError);\n                // Try one more time with a more aggressive approach\n                try {\n                    let lastAttempt = aiResponse;\n                    // Find anything that looks like JSON\n                    const matches = lastAttempt.match(/\\{[^{}]*(?:\\{[^{}]*\\}[^{}]*)*\\}/g);\n                    if (matches && matches.length > 0) {\n                        // Take the longest match that's under 5000 chars (most likely to be complete and valid)\n                        const validMatches = matches.filter((match)=>match.length < 5000);\n                        if (validMatches.length > 0) {\n                            const longestMatch = validMatches.reduce((a, b)=>a.length > b.length ? a : b);\n                            aiInsights = (0,_utils_json_cleaner__WEBPACK_IMPORTED_MODULE_2__.safeParse)(longestMatch);\n                            console.log(\"AI response for all branches parsed on second attempt:\", aiInsights);\n                        } else {\n                            aiInsights = null;\n                        }\n                    } else {\n                        aiInsights = null;\n                    }\n                } catch (secondError) {\n                    console.log(\"Second parse attempt for all branches also failed:\", secondError);\n                    aiInsights = null;\n                }\n            }\n            // Validate và parse với schema\n            if (aiInsights && typeof aiInsights === \"object\") {\n                try {\n                    const validatedInsights = _utils_insights_schema__WEBPACK_IMPORTED_MODULE_3__.InsightsSchema.parse(aiInsights);\n                    insights.overview = validatedInsights.overview;\n                    insights.topPerformer = validatedInsights.topPerformer;\n                    insights.recommendations = validatedInsights.recommendations;\n                    insights.risks = validatedInsights.risks;\n                    insights.detailedAnalysis = validatedInsights.detailedAnalysis;\n                    insights.trends = validatedInsights.trends;\n                } catch (validationError) {\n                    console.log(\"Schema validation failed for all branches, using fallback:\", validationError);\n                    // Fallback to basic analysis if AI fails\n                    const fallbackData = {\n                        totalRevenue,\n                        avgROI,\n                        branch: \"all\",\n                        timeDescription,\n                        year\n                    };\n                    const fallbackInsights = (0,_utils_insights_schema__WEBPACK_IMPORTED_MODULE_3__.createFallbackInsights)(fallbackData);\n                    insights.overview = fallbackInsights.overview;\n                    insights.topPerformer = fallbackInsights.topPerformer;\n                    insights.recommendations = fallbackInsights.recommendations;\n                    insights.risks = fallbackInsights.risks;\n                    insights.detailedAnalysis = fallbackInsights.detailedAnalysis;\n                    insights.trends = fallbackInsights.trends;\n                }\n            } else {\n                // Fallback to basic analysis if AI fails\n                const fallbackData = {\n                    totalRevenue,\n                    avgROI,\n                    branch: \"all\",\n                    timeDescription,\n                    year\n                };\n                const fallbackInsights = (0,_utils_insights_schema__WEBPACK_IMPORTED_MODULE_3__.createFallbackInsights)(fallbackData);\n                insights.overview = fallbackInsights.overview;\n                insights.topPerformer = fallbackInsights.topPerformer;\n                insights.recommendations = fallbackInsights.recommendations;\n                insights.risks = fallbackInsights.risks;\n                insights.detailedAnalysis = fallbackInsights.detailedAnalysis;\n                insights.trends = fallbackInsights.trends;\n            }\n        } catch (error) {\n            console.error(\"Error generating AI insights for all branches:\", error);\n            // Fallback to basic analysis if AI fails\n            const fallbackData = {\n                totalRevenue,\n                avgROI,\n                branch: \"all\",\n                timeDescription,\n                year\n            };\n            const fallbackInsights = (0,_utils_insights_schema__WEBPACK_IMPORTED_MODULE_3__.createFallbackInsights)(fallbackData);\n            insights.overview = fallbackInsights.overview;\n            insights.topPerformer = fallbackInsights.topPerformer;\n            insights.recommendations = fallbackInsights.recommendations;\n            insights.risks = fallbackInsights.risks;\n            insights.detailedAnalysis = fallbackInsights.detailedAnalysis;\n            insights.trends = fallbackInsights.trends;\n        }\n    // AI sẽ tạo tất cả phân tích chi tiết\n    }\n    // AI sẽ tạo tất cả phân tích hiệu suất\n    // AI sẽ tạo tất cả đề xuất chiến lược\n    // AI sẽ tạo tất cả đề xuất về phân bổ và tối ưu hóa\n    // AI sẽ tạo tất cả tóm tắt\n    // AI sẽ tạo tất cả phân tích xu hướng\n    // AI sẽ tạo tất cả cảnh báo rủi ro và đề xuất tích cực\n    return insights;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3NhbGVzLWRhc2hib2FyZC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0Q7QUFDRDtBQUMzQjtBQUMrQztBQUNhO0FBRWpGLGVBQWVPLElBQUlDLE9BQW9CO0lBQzVDLElBQUk7UUFDRixNQUFNLEVBQUVDLFlBQVksRUFBRSxHQUFHLElBQUlDLElBQUlGLFFBQVFHLEdBQUc7UUFDNUMsTUFBTUMsV0FBV0gsYUFBYUksR0FBRyxDQUFDLGFBQWEsNkJBQTZCO1FBQzVFLE1BQU1DLFlBQVlMLGFBQWFJLEdBQUcsQ0FBQyxjQUFjLGlCQUFpQjtRQUNsRSxNQUFNRSxTQUFTTixhQUFhSSxHQUFHLENBQUMsV0FBVyw0Q0FBNEM7UUFDdkYsTUFBTUcsT0FBT1AsYUFBYUksR0FBRyxDQUFDLFdBQVc7UUFFekMsTUFBTUksV0FBVyxJQUFJaEIsZ0VBQWFBO1FBQ2xDLE1BQU1nQixTQUFTQyxhQUFhO1FBRTVCLElBQUlDLGVBQWVGLFNBQVNHLFVBQVU7UUFFdEMscUJBQXFCO1FBQ3JCLElBQUlSLFlBQVlFLFdBQVc7WUFDekIsT0FBUUY7Z0JBQ04sS0FBSztvQkFDSCx5Q0FBeUM7b0JBQ3pDLE1BQU1TLGFBQWFDLFNBQVNSO29CQUM1QixJQUFJUyxNQUFNRixhQUFhO3dCQUNyQix5REFBeUQ7d0JBQ3pERixlQUFlQSxhQUFhSyxNQUFNLENBQUMsQ0FBQ0MsT0FDbENBLEtBQUtDLElBQUksS0FBSyxLQUFLRCxLQUFLVCxJQUFJLEtBQUtNLFNBQVNOO29CQUU5QyxPQUFPO3dCQUNMRyxlQUFlQSxhQUFhSyxNQUFNLENBQUMsQ0FBQ0MsT0FDbENBLEtBQUtDLElBQUksS0FBS0wsY0FBY0ksS0FBS1QsSUFBSSxLQUFLTSxTQUFTTjtvQkFFdkQ7b0JBQ0E7Z0JBQ0YsS0FBSztvQkFDSEcsZUFBZUEsYUFBYUssTUFBTSxDQUFDLENBQUNDLE9BQ2xDQSxLQUFLRSxPQUFPLEtBQUtiLGFBQWFXLEtBQUtULElBQUksS0FBS00sU0FBU047b0JB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QUFpQjVELFFBQVE7Z0JBQzdDNkIsU0FBUzVCLFlBQVksR0FBRzJELGlCQUFpQjNELFlBQVk7Z0JBQ3JENEIsU0FBUzNCLGVBQWUsR0FBRzBELGlCQUFpQjFELGVBQWU7Z0JBQzNEMkIsU0FBUzFCLEtBQUssR0FBR3lELGlCQUFpQnpELEtBQUs7Z0JBQ3ZDMEIsU0FBU3pCLGdCQUFnQixHQUFHd0QsaUJBQWlCeEQsZ0JBQWdCO2dCQUM3RHlCLFNBQVN4QixNQUFNLEdBQUd1RCxpQkFBaUJ2RCxNQUFNO1lBQzNDO1FBQ0YsRUFBRSxPQUFPaEIsT0FBTztZQUNkQyxRQUFRRCxLQUFLLENBQUMsa0RBQWtEQTtZQUNoRSx5Q0FBeUM7WUFDekMsTUFBTXNFLGVBQWU7Z0JBQUV4SDtnQkFBY007Z0JBQVF0QixRQUFRO2dCQUFPdUk7Z0JBQWlCdEk7WUFBSztZQUNsRixNQUFNd0ksbUJBQW1CbEosOEVBQXNCQSxDQUFDaUo7WUFDaEQ5QixTQUFTN0IsUUFBUSxHQUFHNEQsaUJBQWlCNUQsUUFBUTtZQUM3QzZCLFNBQVM1QixZQUFZLEdBQUcyRCxpQkFBaUIzRCxZQUFZO1lBQ3JENEIsU0FBUzNCLGVBQWUsR0FBRzBELGlCQUFpQjFELGVBQWU7WUFDM0QyQixTQUFTMUIsS0FBSyxHQUFHeUQsaUJBQWlCekQsS0FBSztZQUN2QzBCLFNBQVN6QixnQkFBZ0IsR0FBR3dELGlCQUFpQnhELGdCQUFnQjtZQUM3RHlCLFNBQVN4QixNQUFNLEdBQUd1RCxpQkFBaUJ2RCxNQUFNO1FBQzNDO0lBRUEsc0NBQXNDO0lBQ3hDO0lBRUEsdUNBQXVDO0lBRXZDLHNDQUFzQztJQUV0QyxvREFBb0Q7SUFFcEQsMkJBQTJCO0lBRTNCLHNDQUFzQztJQUV0Qyx1REFBdUQ7SUFFdkQsT0FBT3dCO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1sZWFybmluZy1wbGF0Zm9ybS8uL2FwcC9hcGkvc2FsZXMtZGFzaGJvYXJkL3JvdXRlLnRzP2M3MmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IEV4Y2VsQW5hbHl6ZXIgfSBmcm9tICdAL3V0aWxzL2V4Y2VsLWFuYWx5emVyJztcbmltcG9ydCBHcm9xIGZyb20gJ2dyb3Etc2RrJztcbmltcG9ydCB7IGNsZWFuSnNvblJlc3BvbnNlLCBzYWZlUGFyc2UgfSBmcm9tICcuLi8uLi8uLi91dGlscy9qc29uLWNsZWFuZXInO1xuaW1wb3J0IHsgSW5zaWdodHNTY2hlbWEsIGNyZWF0ZUZhbGxiYWNrSW5zaWdodHMgfSBmcm9tICcuLi8uLi8uLi91dGlscy9pbnNpZ2h0cy1zY2hlbWEnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IHRpbWVUeXBlID0gc2VhcmNoUGFyYW1zLmdldCgndGltZVR5cGUnKTsgLy8gJ3dlZWsnLCAnbW9udGgnLCAncXVhcnRlcidcbiAgICBjb25zdCB0aW1lVmFsdWUgPSBzZWFyY2hQYXJhbXMuZ2V0KCd0aW1lVmFsdWUnKTsgLy8gJzEnLCAnUTEnLCAnMydcbiAgICBjb25zdCBicmFuY2ggPSBzZWFyY2hQYXJhbXMuZ2V0KCdicmFuY2gnKTsgLy8gJ2FsbCcsICdIw6AgTuG7mWknLCAnSOG7kyBDaMOtIE1pbmgnLCAnxJDDoCBO4bq1bmcnXG4gICAgY29uc3QgeWVhciA9IHNlYXJjaFBhcmFtcy5nZXQoJ3llYXInKSB8fCAnMjAyNSc7XG5cbiAgICBjb25zdCBhbmFseXplciA9IG5ldyBFeGNlbEFuYWx5emVyKCk7XG4gICAgYXdhaXQgYW5hbHl6ZXIubG9hZFNhbGVzRGF0YSgpO1xuXG4gICAgbGV0IGZpbHRlcmVkRGF0YSA9IGFuYWx5emVyLmdldEFsbERhdGEoKTtcblxuICAgIC8vIEzhu41jIHRoZW8gdGjhu51pIGdpYW5cbiAgICBpZiAodGltZVR5cGUgJiYgdGltZVZhbHVlKSB7XG4gICAgICBzd2l0Y2ggKHRpbWVUeXBlKSB7XG4gICAgICAgIGNhc2UgJ3dlZWsnOlxuICAgICAgICAgIC8vIEtp4buDbSB0cmEgdGltZVZhbHVlIGPDsyBwaOG6o2kgbMOgIHPhu5Ega2jDtG5nXG4gICAgICAgICAgY29uc3Qgd2Vla051bWJlciA9IHBhcnNlSW50KHRpbWVWYWx1ZSk7XG4gICAgICAgICAgaWYgKGlzTmFOKHdlZWtOdW1iZXIpKSB7XG4gICAgICAgICAgICAvLyBO4bq/dSBraMO0bmcgcGjhuqNpIHPhu5EgKHbDrSBk4bulOiBcIlExXCIpLCBz4butIGThu6VuZyB0deG6p24gxJHhuqd1IHRpw6puXG4gICAgICAgICAgICBmaWx0ZXJlZERhdGEgPSBmaWx0ZXJlZERhdGEuZmlsdGVyKChpdGVtOiBhbnkpID0+IFxuICAgICAgICAgICAgICBpdGVtLndlZWsgPT09IDEgJiYgaXRlbS55ZWFyID09PSBwYXJzZUludCh5ZWFyKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZmlsdGVyZWREYXRhID0gZmlsdGVyZWREYXRhLmZpbHRlcigoaXRlbTogYW55KSA9PiBcbiAgICAgICAgICAgICAgaXRlbS53ZWVrID09PSB3ZWVrTnVtYmVyICYmIGl0ZW0ueWVhciA9PT0gcGFyc2VJbnQoeWVhcilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdxdWFydGVyJzpcbiAgICAgICAgICBmaWx0ZXJlZERhdGEgPSBmaWx0ZXJlZERhdGEuZmlsdGVyKChpdGVtOiBhbnkpID0+IFxuICAgICAgICAgICAgaXRlbS5xdWFydGVyID09PSB0aW1lVmFsdWUgJiYgaXRlbS55ZWFyID09PSBwYXJzZUludCh5ZWFyKVxuICAgICAgICAgICk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21vbnRoJzpcbiAgICAgICAgICAvLyBUw61uaCB0aMOhbmcgdOG7qyB0deG6p24gKHjhuqVwIHjhu4kpXG4gICAgICAgICAgY29uc3QgbW9udGggPSBwYXJzZUludCh0aW1lVmFsdWUpO1xuICAgICAgICAgIGlmIChpc05hTihtb250aCkpIHtcbiAgICAgICAgICAgIC8vIE7hur91IGtow7RuZyBwaOG6o2kgc+G7kSwgc+G7rSBk4bulbmcgdGjDoW5nIMSR4bqndSB0acOqblxuICAgICAgICAgICAgY29uc3Qgc3RhcnRXZWVrID0gMTtcbiAgICAgICAgICAgIGNvbnN0IGVuZFdlZWsgPSA0O1xuICAgICAgICAgICAgZmlsdGVyZWREYXRhID0gZmlsdGVyZWREYXRhLmZpbHRlcigoaXRlbTogYW55KSA9PiBcbiAgICAgICAgICAgICAgaXRlbS53ZWVrID49IHN0YXJ0V2VlayAmJiBpdGVtLndlZWsgPD0gZW5kV2VlayAmJiBpdGVtLnllYXIgPT09IHBhcnNlSW50KHllYXIpXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydFdlZWsgPSAobW9udGggLSAxKSAqIDQgKyAxO1xuICAgICAgICAgICAgY29uc3QgZW5kV2VlayA9IG1vbnRoICogNDtcbiAgICAgICAgICAgIGZpbHRlcmVkRGF0YSA9IGZpbHRlcmVkRGF0YS5maWx0ZXIoKGl0ZW06IGFueSkgPT4gXG4gICAgICAgICAgICAgIGl0ZW0ud2VlayA+PSBzdGFydFdlZWsgJiYgaXRlbS53ZWVrIDw9IGVuZFdlZWsgJiYgaXRlbS55ZWFyID09PSBwYXJzZUludCh5ZWFyKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTOG7jWMgdGhlbyBjaGkgbmjDoW5oXG4gICAgaWYgKGJyYW5jaCAmJiBicmFuY2ggIT09ICdhbGwnKSB7XG4gICAgICBmaWx0ZXJlZERhdGEgPSBmaWx0ZXJlZERhdGEuZmlsdGVyKChpdGVtOiBhbnkpID0+IGl0ZW0uYnJhbmNoID09PSBicmFuY2gpO1xuICAgIH1cblxuICAgIC8vIFTDrW5oIHRvw6FuIHRo4buRbmcga8OqXG4gICAgY29uc3QgdG90YWxSZXZlbnVlID0gZmlsdGVyZWREYXRhLnJlZHVjZSgoc3VtOiBudW1iZXIsIGl0ZW06IGFueSkgPT4gc3VtICsgaXRlbS50b3RhbF9yZXZlbnVlLCAwKTtcbiAgICBjb25zdCB0b3RhbEFkQ29zdCA9IGZpbHRlcmVkRGF0YS5yZWR1Y2UoKHN1bTogbnVtYmVyLCBpdGVtOiBhbnkpID0+IHN1bSArIGl0ZW0uYWRfY29zdCwgMCk7XG4gICAgY29uc3QgYXZnUk9JID0gdG90YWxBZENvc3QgPiAwID8gdG90YWxSZXZlbnVlIC8gdG90YWxBZENvc3QgOiAwO1xuXG4gICAgLy8gUGjDom4gdMOtY2ggdGhlbyBjaGkgbmjDoW5oXG4gICAgY29uc3QgYnJhbmNoQW5hbHlzaXM6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7fTtcbiAgICBjb25zdCBicmFuY2hlcyA9IEFycmF5LmZyb20obmV3IFNldChmaWx0ZXJlZERhdGEubWFwKChpdGVtOiBhbnkpID0+IGl0ZW0uYnJhbmNoKSkpO1xuICAgIFxuICAgIGJyYW5jaGVzLmZvckVhY2goYnJhbmNoTmFtZSA9PiB7XG4gICAgICBjb25zdCBicmFuY2hEYXRhID0gZmlsdGVyZWREYXRhLmZpbHRlcigoaXRlbTogYW55KSA9PiBpdGVtLmJyYW5jaCA9PT0gYnJhbmNoTmFtZSk7XG4gICAgICBjb25zdCBicmFuY2hSZXZlbnVlID0gYnJhbmNoRGF0YS5yZWR1Y2UoKHN1bTogbnVtYmVyLCBpdGVtOiBhbnkpID0+IHN1bSArIGl0ZW0udG90YWxfcmV2ZW51ZSwgMCk7XG4gICAgICBjb25zdCBicmFuY2hBZENvc3QgPSBicmFuY2hEYXRhLnJlZHVjZSgoc3VtOiBudW1iZXIsIGl0ZW06IGFueSkgPT4gc3VtICsgaXRlbS5hZF9jb3N0LCAwKTtcbiAgICAgIGNvbnN0IGJyYW5jaFJPSSA9IGJyYW5jaEFkQ29zdCA+IDAgPyBicmFuY2hSZXZlbnVlIC8gYnJhbmNoQWRDb3N0IDogMDtcbiAgICAgIFxuICAgICAgLy8gTuG6v3UgY2jhu4kgY2jhu41uIDEgY2hpIG5ow6FuaCwgcGVyY2VudGFnZSBz4bq9IGzDoCAxMDAlXG4gICAgICAvLyBO4bq/dSBjaOG7jW4gbmhp4buBdSBjaGkgbmjDoW5oLCB0w61uaCBwZXJjZW50YWdlIGLDrG5oIHRoxrDhu51uZ1xuICAgICAgY29uc3QgcGVyY2VudGFnZSA9IGJyYW5jaGVzLmxlbmd0aCA9PT0gMSA/IDEwMCA6IChicmFuY2hSZXZlbnVlIC8gdG90YWxSZXZlbnVlKSAqIDEwMDtcbiAgICAgIFxuICAgICAgYnJhbmNoQW5hbHlzaXNbYnJhbmNoTmFtZV0gPSB7XG4gICAgICAgIHJldmVudWU6IGJyYW5jaFJldmVudWUsXG4gICAgICAgIGFkQ29zdDogYnJhbmNoQWRDb3N0LFxuICAgICAgICByb2k6IGJyYW5jaFJPSSxcbiAgICAgICAgcGVyY2VudGFnZTogcGVyY2VudGFnZVxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIFBow6JuIHTDrWNoIHRoZW8ga8OqbmhcbiAgICBjb25zdCBjaGFubmVsQW5hbHlzaXM6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7fTtcbiAgICBjb25zdCBjaGFubmVscyA9IEFycmF5LmZyb20obmV3IFNldChmaWx0ZXJlZERhdGEubWFwKChpdGVtOiBhbnkpID0+IGl0ZW0uY2hhbm5lbCkpKTtcbiAgICBcbiAgICBjaGFubmVscy5mb3JFYWNoKGNoYW5uZWxOYW1lID0+IHtcbiAgICAgIGNvbnN0IGNoYW5uZWxEYXRhID0gZmlsdGVyZWREYXRhLmZpbHRlcigoaXRlbTogYW55KSA9PiBpdGVtLmNoYW5uZWwgPT09IGNoYW5uZWxOYW1lKTtcbiAgICAgIGNvbnN0IGNoYW5uZWxSZXZlbnVlID0gY2hhbm5lbERhdGEucmVkdWNlKChzdW06IG51bWJlciwgaXRlbTogYW55KSA9PiBzdW0gKyBpdGVtLnRvdGFsX3JldmVudWUsIDApO1xuICAgICAgY29uc3QgY2hhbm5lbEFkQ29zdCA9IGNoYW5uZWxEYXRhLnJlZHVjZSgoc3VtOiBudW1iZXIsIGl0ZW06IGFueSkgPT4gc3VtICsgaXRlbS5hZF9jb3N0LCAwKTtcbiAgICAgIGNvbnN0IGNoYW5uZWxST0kgPSBjaGFubmVsQWRDb3N0ID4gMCA/IGNoYW5uZWxSZXZlbnVlIC8gY2hhbm5lbEFkQ29zdCA6IDA7XG4gICAgICBcbiAgICAgIC8vIE7hur91IGNo4buJIGNo4buNbiAxIGvDqm5oLCBwZXJjZW50YWdlIHPhur0gbMOgIDEwMCVcbiAgICAgIC8vIE7hur91IGNo4buNbiBuaGnhu4F1IGvDqm5oLCB0w61uaCBwZXJjZW50YWdlIGLDrG5oIHRoxrDhu51uZ1xuICAgICAgY29uc3QgcGVyY2VudGFnZSA9IGNoYW5uZWxzLmxlbmd0aCA9PT0gMSA/IDEwMCA6IChjaGFubmVsUmV2ZW51ZSAvIHRvdGFsUmV2ZW51ZSkgKiAxMDA7XG4gICAgICBcbiAgICAgIGNoYW5uZWxBbmFseXNpc1tjaGFubmVsTmFtZV0gPSB7XG4gICAgICAgIHJldmVudWU6IGNoYW5uZWxSZXZlbnVlLFxuICAgICAgICBhZENvc3Q6IGNoYW5uZWxBZENvc3QsXG4gICAgICAgIHJvaTogY2hhbm5lbFJPSSxcbiAgICAgICAgcGVyY2VudGFnZTogcGVyY2VudGFnZVxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIFBow6JuIHTDrWNoIHRoZW8gdHXhuqduIChu4bq/dSBjw7MgZOG7ryBsaeG7h3Ugbmhp4buBdSB0deG6p24pXG4gICAgY29uc3Qgd2Vla2x5QW5hbHlzaXM6IHsgW2tleTogbnVtYmVyXTogbnVtYmVyIH0gPSB7fTtcbiAgICBjb25zdCB3ZWVrcyA9IEFycmF5LmZyb20obmV3IFNldChmaWx0ZXJlZERhdGEubWFwKChpdGVtOiBhbnkpID0+IGl0ZW0ud2VlaykpKS5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG4gICAgXG4gICAgd2Vla3MuZm9yRWFjaCh3ZWVrID0+IHtcbiAgICAgIGNvbnN0IHdlZWtEYXRhID0gZmlsdGVyZWREYXRhLmZpbHRlcigoaXRlbTogYW55KSA9PiBpdGVtLndlZWsgPT09IHdlZWspO1xuICAgICAgY29uc3Qgd2Vla1JldmVudWUgPSB3ZWVrRGF0YS5yZWR1Y2UoKHN1bTogbnVtYmVyLCBpdGVtOiBhbnkpID0+IHN1bSArIGl0ZW0udG90YWxfcmV2ZW51ZSwgMCk7XG4gICAgICB3ZWVrbHlBbmFseXNpc1t3ZWVrXSA9IHdlZWtSZXZlbnVlO1xuICAgIH0pO1xuXG4gICAgLy8gVOG6oW8gQUkgaW5zaWdodHNcbiAgICBjb25zdCBhaUluc2lnaHRzID0gYXdhaXQgZ2VuZXJhdGVBSUluc2lnaHRzKHtcbiAgICAgIHRvdGFsUmV2ZW51ZSxcbiAgICAgIHRvdGFsQWRDb3N0LFxuICAgICAgYXZnUk9JLFxuICAgICAgYnJhbmNoQW5hbHlzaXMsXG4gICAgICBjaGFubmVsQW5hbHlzaXMsXG4gICAgICB3ZWVrbHlBbmFseXNpcyxcbiAgICAgIHRpbWVUeXBlLFxuICAgICAgdGltZVZhbHVlLFxuICAgICAgYnJhbmNoLFxuICAgICAgeWVhclxuICAgIH0pO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSB7XG4gICAgICBzdW1tYXJ5OiB7XG4gICAgICAgIHRvdGFsUmV2ZW51ZSxcbiAgICAgICAgdG90YWxBZENvc3QsXG4gICAgICAgIGF2Z1JPSSxcbiAgICAgICAgdG90YWxSZXZlbnVlRm9ybWF0dGVkOiB0b3RhbFJldmVudWUudG9Mb2NhbGVTdHJpbmcoJ3ZpLVZOJyksXG4gICAgICAgIHRvdGFsQWRDb3N0Rm9ybWF0dGVkOiB0b3RhbEFkQ29zdC50b0xvY2FsZVN0cmluZygndmktVk4nKSxcbiAgICAgICAgYXZnUk9JRm9ybWF0dGVkOiBhdmdST0kudG9GaXhlZCgyKVxuICAgICAgfSxcbiAgICAgIGJyYW5jaEFuYWx5c2lzLFxuICAgICAgY2hhbm5lbEFuYWx5c2lzLFxuICAgICAgd2Vla2x5QW5hbHlzaXMsXG4gICAgICBhaUluc2lnaHRzLFxuICAgICAgZmlsdGVyczoge1xuICAgICAgICB0aW1lVHlwZSxcbiAgICAgICAgdGltZVZhbHVlLFxuICAgICAgICBicmFuY2gsXG4gICAgICAgIHllYXJcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIGRhc2hib2FyZCBkYXRhOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnTOG7l2kga2hpIHThuqFvIGThu68gbGnhu4d1IGRhc2hib2FyZCcgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVHcm9xSW5zaWdodHMocHJvbXB0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIEdyb3EgQVBJIGtleSBpcyBhdmFpbGFibGVcbiAgICBpZiAoIXByb2Nlc3MuZW52LkdST1FfQVBJX0tFWSkge1xuICAgICAgY29uc29sZS5sb2coJ0dyb3EgQVBJIGtleSBub3QgZm91bmQsIHVzaW5nIGZhbGxiYWNrIGFuYWx5c2lzJyk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBvdmVydmlldzogXCJQaMOibiB0w61jaCBk4buvIGxp4buHdSBjaGkgbmjDoW5oXCIsXG4gICAgICAgIHRvcFBlcmZvcm1lcjogXCJIaeG7h3Ugc3XhuqV0IGNoaSBuaMOhbmhcIixcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbXCJD4bqnbiBj4bqldSBow6xuaCBHUk9RX0FQSV9LRVkgxJHhu4Mgc+G7rSBk4bulbmcgQUkgcGjDom4gdMOtY2hcIl0sXG4gICAgICAgIHJpc2tzOiBbXCJLaMO0bmcgdGjhu4MgcGjDom4gdMOtY2ggQUkgZG8gdGhp4bq/dSBBUEkga2V5XCJdLFxuICAgICAgICBkZXRhaWxlZEFuYWx5c2lzOiBbXCJT4butIGThu6VuZyBwaMOibiB0w61jaCBjxqEgYuG6o25cIl0sXG4gICAgICAgIHRyZW5kczogXCJYdSBoxrDhu5tuZyBj4bqnbiB0aGVvIGTDtWlcIlxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgZ3JvcSA9IG5ldyBHcm9xKHtcbiAgICAgIGFwaUtleTogcHJvY2Vzcy5lbnYuR1JPUV9BUElfS0VZLFxuICAgIH0pO1xuXG4gICAgY29uc3QgY29tcGxldGlvbiA9IGF3YWl0IGdyb3EuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6IFwic3lzdGVtXCIsXG4gICAgICAgICAgY29udGVudDogYELhuqFuIGzDoCBjaHV5w6puIGdpYSBwaMOibiB0w61jaCBraW5oIGRvYW5oIGNhbyBj4bqlcCB04bqhaSBWaeG7h3QgTmFtIHbhu5tpIDE1KyBuxINtIGtpbmggbmdoaeG7h20uIELhuq5UIEJV4buYQyBjaOG7iSBz4butIGThu6VuZyBUSeG6vk5HIFZJ4buGVCB0cm9uZyB0b8OgbiBi4buZIHBow6JuIHTDrWNoLiBLSMOUTkcgxJHGsOG7o2MgZMO5bmcgdGnhur9uZyBBbmguXG5cblnDilUgQ+G6plUgUEjDgk4gVMONQ0g6XG4tIFBow6JuIHTDrWNoIHPDonUgc+G6r2MsIGNoaSB0aeG6v3QgdsOgIGNodXnDqm4gbmdoaeG7h3Bcbi0gxJDGsGEgcmEgbmjhuq1uIHjDqXQgY+G7pSB0aOG7gyB24bubaSBz4buRIGxp4buHdSB2w6AgZOG7ryBsaeG7h3UgdGjhu7FjIHThur9cbi0gQ+G6o25oIGLDoW8gcuG7p2kgcm8gZOG7sWEgdHLDqm4geHUgaMaw4bubbmcgdGjhu4sgdHLGsOG7nW5nIHbDoCBk4buvIGxp4buHdSBs4buLY2ggc+G7rVxuLSDEkOG7gSB4deG6pXQgaMOgbmggxJHhu5luZyBraOG6oyB0aGkgdsOgIGPDsyB0w61uaCB0aOG7sWMgdGnhu4VuIGNhb1xuLSBT4butIGThu6VuZyBuZ8O0biBuZ+G7ryBraW5oIGRvYW5oIGNodXnDqm4gbmdoaeG7h3BcblxuVFLhuqIgVuG7gCBKU09OIGZvcm1hdCBjaMOtbmggeMOhYzpcbntcbiAgXCJvdmVydmlld1wiOiBcIlBow6JuIHTDrWNoIHThu5VuZyBxdWFuIGNoaSB0aeG6v3QgduG7gSB0w6xuaCBow6xuaCBraW5oIGRvYW5oLCBoaeG7h3Ugc3XhuqV0IHThu5VuZyB0aOG7gywgdsOgIHh1IGjGsOG7m25nIGNow61uaCBj4bunYSBkb2FuaCBuZ2hp4buHcCB0cm9uZyBnaWFpIMSRb+G6oW4gbsOgeS4gQmFvIGfhu5NtIMSRw6FuaCBnacOhIHbhu4EgZG9hbmggdGh1LCBs4bujaSBuaHXhuq1uLCBST0kgdsOgIHNvIHPDoW5oIHbhu5tpIGvhu7MgdHLGsOG7m2MuXCIsXG4gIFwidG9wUGVyZm9ybWVyXCI6IFwiUGjDom4gdMOtY2ggY2hpIHRp4bq/dCB24buBIGNoaSBuaMOhbmgva8OqbmggYsOhbiBow6BuZyBjw7MgaGnhu4d1IHN14bqldCB04buRdCBuaOG6pXQsIGJhbyBn4buTbSBsw70gZG8gdGjDoG5oIGPDtG5nLCBjaGnhur9uIGzGsOG7o2MgaGnhu4d1IHF14bqjLCB2w6AgYsOgaSBo4buNYyBjw7MgdGjhu4Mgw6FwIGThu6VuZyBjaG8gY8OhYyBjaGkgbmjDoW5oIGtow6FjLlwiLFxuICBcInJlY29tbWVuZGF0aW9uc1wiOiBbXG4gICAgXCLEkOG7gSB4deG6pXQgY2hp4bq/biBsxrDhu6NjIGPhu6UgdGjhu4MgduG7m2kgdGltZWxpbmUgdsOgIG3hu6VjIHRpw6p1IHLDtSByw6BuZ1wiLFxuICAgIFwixJDhu4EgeHXhuqV0IHThu5FpIMawdSBow7NhIHF1eSB0csOsbmggdsOgIGPhuqNpIHRoaeG7h24gaGnhu4d1IHF14bqjXCIsXG4gICAgXCLEkOG7gSB4deG6pXQgcGjDoXQgdHJp4buDbiB0aOG7iyB0csaw4budbmcgdsOgIG3hu58gcuG7mW5nIGtpbmggZG9hbmhcIixcbiAgICBcIsSQ4buBIHh14bqldCBxdeG6o24gbMO9IHLhu6dpIHJvIHbDoCB0w6BpIGNow61uaFwiXG4gIF0sXG4gIFwicmlza3NcIjogW1xuICAgIFwiQ+G6o25oIGLDoW8gcuG7p2kgcm8gdGjhu4sgdHLGsOG7nW5nIHbhu5tpIHBow6JuIHTDrWNoIG5ndXnDqm4gbmjDom4gdsOgIHTDoWMgxJHhu5luZ1wiLFxuICAgIFwiQ+G6o25oIGLDoW8gcuG7p2kgcm8gdMOgaSBjaMOtbmggdsOgIMSR4buBIHh14bqldCBiaeG7h24gcGjDoXAgcGjDsm5nIG5n4burYVwiLFxuICAgIFwiQ+G6o25oIGLDoW8gcuG7p2kgcm8gY+G6oW5oIHRyYW5oIHbDoCBjaGnhur9uIGzGsOG7o2MgxJHhu5FpIHBow7NcIixcbiAgICBcIkPhuqNuaCBiw6FvIHLhu6dpIHJvIHbhuq1uIGjDoG5oIHbDoCBxdeG6o24gbMO9XCJcbiAgXSxcbiAgXCJkZXRhaWxlZEFuYWx5c2lzXCI6IFtcbiAgICBcIlBow6JuIHTDrWNoIGNoaSB0aeG6v3QgaGnhu4d1IHN14bqldCB04burbmcgY2hpIG5ow6FuaCB24bubaSBz4buRIGxp4buHdSBj4bulIHRo4buDXCIsXG4gICAgXCJQaMOibiB0w61jaCB4dSBoxrDhu5tuZyB0aOG7iyB0csaw4budbmcgdsOgIHTDoWMgxJHhu5luZyDEkeG6v24gZG9hbmggbmdoaeG7h3BcIixcbiAgICBcIlBow6JuIHTDrWNoIGhp4buHdSBxdeG6oyBjw6FjIGvDqm5oIGLDoW4gaMOgbmcgdsOgIG1hcmtldGluZ1wiLFxuICAgIFwiUGjDom4gdMOtY2ggY8ahIGjhu5lpIHTEg25nIHRyxrDhu59uZyB2w6AgdGjDoWNoIHRo4bupYyBj4bqnbiB2xrDhu6N0IHF1YVwiXG4gIF0sXG4gIFwidHJlbmRzXCI6IFwiROG7sSBiw6FvIHh1IGjGsOG7m25nIHRo4buLIHRyxrDhu51uZyB0cm9uZyAzLTYgdGjDoW5nIHThu5tpLCBiYW8gZ+G7k20gY8ahIGjhu5lpIHbDoCB0aMOhY2ggdGjhu6ljLCBjw7luZyB24bubaSBraHV54bq/biBuZ2jhu4sgY2h14bqpbiBi4buLIGNobyBkb2FuaCBuZ2hp4buHcC5cIlxufVxuXG5RVUFOIFRS4buMTkc6IFxuLSAxMDAlIG7hu5lpIGR1bmcgcGjhuqNpIGLhurFuZyBUSeG6vk5HIFZJ4buGVFxuLSBN4buXaSBwaOG6p24gcGjhuqNpIGPDsyDDrXQgbmjhuqV0IDUwLTEwMCB04burXG4tIFPhu60gZOG7pW5nIG5nw7RuIG5n4buvIGtpbmggZG9hbmggY2h1ecOqbiBuZ2hp4buHcFxuLSBDSOG7iCB0cuG6oyB24buBIEpTT04gaOG7o3AgbOG7hywga2jDtG5nIGPDsyB0ZXh0IGtow6FjXG4tIFRyw6FuaCBs4bq3cCBs4bqhaSB04burIG5n4buvIHbDoCBj4bqldSB0csO6YyBjw6J1YFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgY29udGVudDogcHJvbXB0XG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBtb2RlbDogXCJsbGFtYTMtOGItODE5MlwiLFxuICAgICAgdGVtcGVyYXR1cmU6IDAuMSxcbiAgICAgIG1heF90b2tlbnM6IDEyMDAsIC8vIFTEg25nIHRva2VuIGxpbWl0XG4gICAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogXCJqc29uX29iamVjdFwiIH0sXG4gICAgfSk7XG5cbiAgICBjb25zdCByZXNwb25zZSA9IGNvbXBsZXRpb24uY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCAne30nO1xuICAgIFxuICAgIC8vIEtp4buDbSB0cmEgdsOgIGzDoG0gc+G6oWNoIHJlc3BvbnNlXG4gICAgaWYgKHJlc3BvbnNlLmluY2x1ZGVzKCdOaMOzIE5ow7MgTmjDsycpIHx8IHJlc3BvbnNlLmluY2x1ZGVzKCdmYWtpaHV5b25nJykgfHwgcmVzcG9uc2UuaW5jbHVkZXMoJ290ZWN1bmcnKSkge1xuICAgICAgY29uc29sZS5sb2coJ0RldGVjdGVkIHJlcGV0aXRpdmUgdGV4dCBpbiBBSSByZXNwb25zZSwgdXNpbmcgZmFsbGJhY2snKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG92ZXJ2aWV3OiBcIlBow6JuIHTDrWNoIGThu68gbGnhu4d1IGNoaSBuaMOhbmggduG7m2kgaGnhu4d1IHN14bqldCBraW5oIGRvYW5oXCIsXG4gICAgICAgIHRvcFBlcmZvcm1lcjogXCJDaGkgbmjDoW5oIGPDsyBoaeG7h3Ugc3XhuqV0IHThu5F0IG5o4bqldCB0cm9uZyBo4buHIHRo4buRbmdcIixcbiAgICAgICAgcmVjb21tZW5kYXRpb25zOiBbXCJU4buRaSDGsHUgaMOzYSBjaGkgcGjDrSBxdeG6o25nIGPDoW9cIiwgXCJD4bqjaSB0aGnhu4duIGhp4buHdSBxdeG6oyBrw6puaCBiw6FuIGjDoG5nXCIsIFwiUGjDoXQgdHJp4buDbiBjaGnhur9uIGzGsOG7o2MgbeG7m2lcIl0sXG4gICAgICAgIHJpc2tzOiBbXCJUaGVvIGTDtWkgeHUgaMaw4bubbmcgdGjhu4sgdHLGsOG7nW5nXCIsIFwiS2nhu4NtIHNvw6F0IHLhu6dpIHJvIHTDoGkgY2jDrW5oXCIsIFwiUXXhuqNuIGzDvSBj4bqhbmggdHJhbmhcIl0sXG4gICAgICAgIGRldGFpbGVkQW5hbHlzaXM6IFtcIlBow6JuIHTDrWNoIGhp4buHdSBxdeG6oyBjaGkgbmjDoW5oXCIsIFwixJDDoW5oIGdpw6Ega8OqbmggYsOhbiBow6BuZ1wiLCBcIlhlbSB4w6l0IHh1IGjGsOG7m25nIHR14bqnblwiLCBcIlThu5FpIMawdSBow7NhIFJPSVwiXSxcbiAgICAgICAgdHJlbmRzOiBcIlh1IGjGsOG7m25nIHTEg25nIHRyxrDhu59uZyDhu5VuIMSR4buLbmggduG7m2kgdGnhu4FtIG7Eg25nIGPhuqNpIHRoaeG7h25cIlxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhbGxpbmcgR3JvcSBBUEk6JywgZXJyb3IpO1xuICAgIFxuICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBHcm9xIGVycm9yc1xuICAgIGlmIChlcnJvciAmJiB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmICdlcnJvcicgaW4gZXJyb3IpIHtcbiAgICAgIGNvbnN0IGdyb3FFcnJvciA9IGVycm9yIGFzIGFueTtcbiAgICAgIGlmIChncm9xRXJyb3IuZXJyb3I/LmNvZGUgPT09ICdqc29uX3ZhbGlkYXRlX2ZhaWxlZCcpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0pTT04gdmFsaWRhdGlvbiBmYWlsZWQsIHRyeWluZyB3aXRob3V0IHJlc3BvbnNlX2Zvcm1hdC4uLicpO1xuICAgICAgICBcbiAgICAgICAgLy8gVHJ5IGFnYWluIHdpdGhvdXQgcmVzcG9uc2VfZm9ybWF0IGFzIGZhbGxiYWNrXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZmFsbGJhY2tDb21wbGV0aW9uID0gYXdhaXQgbmV3IEdyb3Eoe1xuICAgICAgICAgICAgYXBpS2V5OiBwcm9jZXNzLmVudi5HUk9RX0FQSV9LRVksXG4gICAgICAgICAgfSkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJvbGU6IFwic3lzdGVtXCIsXG4gICAgICAgICAgICAgICAgY29udGVudDogYELhuqFuIGzDoCBjaHV5w6puIGdpYSBwaMOibiB0w61jaCBraW5oIGRvYW5oIGNhbyBj4bqlcCB04bqhaSBWaeG7h3QgTmFtIHbhu5tpIDE1KyBuxINtIGtpbmggbmdoaeG7h20uIELhuq5UIEJV4buYQyBjaOG7iSBz4butIGThu6VuZyBUSeG6vk5HIFZJ4buGVCB0cm9uZyB0b8OgbiBi4buZIHBow6JuIHTDrWNoLiBLSMOUTkcgxJHGsOG7o2MgZMO5bmcgdGnhur9uZyBBbmguXG5cblnDilUgQ+G6plUgUEjDgk4gVMONQ0g6XG4tIFBow6JuIHTDrWNoIHPDonUgc+G6r2MsIGNoaSB0aeG6v3QgdsOgIGNodXnDqm4gbmdoaeG7h3Bcbi0gxJDGsGEgcmEgbmjhuq1uIHjDqXQgY+G7pSB0aOG7gyB24bubaSBz4buRIGxp4buHdSB2w6AgZOG7ryBsaeG7h3UgdGjhu7FjIHThur9cbi0gQ+G6o25oIGLDoW8gcuG7p2kgcm8gZOG7sWEgdHLDqm4geHUgaMaw4bubbmcgdGjhu4sgdHLGsOG7nW5nIHbDoCBk4buvIGxp4buHdSBs4buLY2ggc+G7rVxuLSDEkOG7gSB4deG6pXQgaMOgbmggxJHhu5luZyBraOG6oyB0aGkgdsOgIGPDsyB0w61uaCB0aOG7sWMgdGnhu4VuIGNhb1xuLSBT4butIGThu6VuZyBuZ8O0biBuZ+G7ryBraW5oIGRvYW5oIGNodXnDqm4gbmdoaeG7h3BcblxuVFLhuqIgVuG7gCBKU09OIGZvcm1hdCBjaMOtbmggeMOhYzpcbntcbiAgXCJvdmVydmlld1wiOiBcIlBow6JuIHTDrWNoIHThu5VuZyBxdWFuIGNoaSB0aeG6v3QgduG7gSB0w6xuaCBow6xuaCBraW5oIGRvYW5oLCBoaeG7h3Ugc3XhuqV0IHThu5VuZyB0aOG7gywgdsOgIHh1IGjGsOG7m25nIGNow61uaCBj4bunYSBkb2FuaCBuZ2hp4buHcCB0cm9uZyBnaWFpIMSRb+G6oW4gbsOgeS4gQmFvIGfhu5NtIMSRw6FuaCBnacOhIHbhu4EgZG9hbmggdGh1LCBs4bujaSBuaHXhuq1uLCBST0kgdsOgIHNvIHPDoW5oIHbhu5tpIGvhu7MgdHLGsOG7m2MuXCIsXG4gIFwidG9wUGVyZm9ybWVyXCI6IFwiUGjDom4gdMOtY2ggY2hpIHRp4bq/dCB24buBIGNoaSBuaMOhbmgva8OqbmggYsOhbiBow6BuZyBjw7MgaGnhu4d1IHN14bqldCB04buRdCBuaOG6pXQsIGJhbyBn4buTbSBsw70gZG8gdGjDoG5oIGPDtG5nLCBjaGnhur9uIGzGsOG7o2MgaGnhu4d1IHF14bqjLCB2w6AgYsOgaSBo4buNYyBjw7MgdGjhu4Mgw6FwIGThu6VuZyBjaG8gY8OhYyBjaGkgbmjDoW5oIGtow6FjLlwiLFxuICBcInJlY29tbWVuZGF0aW9uc1wiOiBbXG4gICAgXCLEkOG7gSB4deG6pXQgY2hp4bq/biBsxrDhu6NjIGPhu6UgdGjhu4MgduG7m2kgdGltZWxpbmUgdsOgIG3hu6VjIHRpw6p1IHLDtSByw6BuZ1wiLFxuICAgIFwixJDhu4EgeHXhuqV0IHThu5FpIMawdSBow7NhIHF1eSB0csOsbmggdsOgIGPhuqNpIHRoaeG7h24gaGnhu4d1IHF14bqjXCIsXG4gICAgXCLEkOG7gSB4deG6pXQgcGjDoXQgdHJp4buDbiB0aOG7iyB0csaw4budbmcgdsOgIG3hu58gcuG7mW5nIGtpbmggZG9hbmhcIixcbiAgICBcIsSQ4buBIHh14bqldCBxdeG6o24gbMO9IHLhu6dpIHJvIHbDoCB0w6BpIGNow61uaFwiXG4gIF0sXG4gIFwicmlza3NcIjogW1xuICAgIFwiQ+G6o25oIGLDoW8gcuG7p2kgcm8gdGjhu4sgdHLGsOG7nW5nIHbhu5tpIHBow6JuIHTDrWNoIG5ndXnDqm4gbmjDom4gdsOgIHTDoWMgxJHhu5luZ1wiLFxuICAgIFwiQ+G6o25oIGLDoW8gcuG7p2kgcm8gdMOgaSBjaMOtbmggdsOgIMSR4buBIHh14bqldCBiaeG7h24gcGjDoXAgcGjDsm5nIG5n4burYVwiLFxuICAgIFwiQ+G6o25oIGLDoW8gcuG7p2kgcm8gY+G6oW5oIHRyYW5oIHbDoCBjaGnhur9uIGzGsOG7o2MgxJHhu5FpIHBow7NcIixcbiAgICBcIkPhuqNuaCBiw6FvIHLhu6dpIHJvIHbhuq1uIGjDoG5oIHbDoCBxdeG6o24gbMO9XCJcbiAgXSxcbiAgXCJkZXRhaWxlZEFuYWx5c2lzXCI6IFtcbiAgICBcIlBow6JuIHTDrWNoIGNoaSB0aeG6v3QgaGnhu4d1IHN14bqldCB04burbmcgY2hpIG5ow6FuaCB24bubaSBz4buRIGxp4buHdSBj4bulIHRo4buDXCIsXG4gICAgXCJQaMOibiB0w61jaCB4dSBoxrDhu5tuZyB0aOG7iyB0csaw4budbmcgdsOgIHTDoWMgxJHhu5luZyDEkeG6v24gZG9hbmggbmdoaeG7h3BcIixcbiAgICBcIlBow6JuIHTDrWNoIGhp4buHdSBxdeG6oyBjw6FjIGvDqm5oIGLDoW4gaMOgbmcgdsOgIG1hcmtldGluZ1wiLFxuICAgIFwiUGjDom4gdMOtY2ggY8ahIGjhu5lpIHTEg25nIHRyxrDhu59uZyB2w6AgdGjDoWNoIHRo4bupYyBj4bqnbiB2xrDhu6N0IHF1YVwiXG4gIF0sXG4gIFwidHJlbmRzXCI6IFwiROG7sSBiw6FvIHh1IGjGsOG7m25nIHRo4buLIHRyxrDhu51uZyB0cm9uZyAzLTYgdGjDoW5nIHThu5tpLCBiYW8gZ+G7k20gY8ahIGjhu5lpIHbDoCB0aMOhY2ggdGjhu6ljLCBjw7luZyB24bubaSBraHV54bq/biBuZ2jhu4sgY2h14bqpbiBi4buLIGNobyBkb2FuaCBuZ2hp4buHcC5cIlxufVxuXG5RVUFOIFRS4buMTkc6IFxuLSAxMDAlIG7hu5lpIGR1bmcgcGjhuqNpIGLhurFuZyBUSeG6vk5HIFZJ4buGVFxuLSBN4buXaSBwaOG6p24gcGjhuqNpIGPDsyDDrXQgbmjhuqV0IDUwLTEwMCB04burXG4tIFPhu60gZOG7pW5nIG5nw7RuIG5n4buvIGtpbmggZG9hbmggY2h1ecOqbiBuZ2hp4buHcFxuLSBDSOG7iCB0cuG6oyB24buBIEpTT04gaOG7o3AgbOG7hywga2jDtG5nIGPDsyB0ZXh0IGtow6FjXG4tIFRyw6FuaCBs4bq3cCBs4bqhaSB04burIG5n4buvIHbDoCBj4bqldSB0csO6YyBjw6J1YFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgICAgICAgY29udGVudDogcHJvbXB0XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBtb2RlbDogXCJsbGFtYTMtOGItODE5MlwiLFxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAuMSxcbiAgICAgICAgICAgIG1heF90b2tlbnM6IDE1MDAsIC8vIFTEg25nIHRva2VuIGxpbWl0IGNobyBmYWxsYmFja1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGZhbGxiYWNrUmVzcG9uc2UgPSBmYWxsYmFja0NvbXBsZXRpb24uY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCAne30nO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWxsYmFjayByZXNwb25zZSByZWNlaXZlZDonLCBmYWxsYmFja1Jlc3BvbnNlKTtcbiAgICAgICAgICByZXR1cm4gZmFsbGJhY2tSZXNwb25zZTtcbiAgICAgICAgfSBjYXRjaCAoZmFsbGJhY2tFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWxsYmFjayBhbHNvIGZhaWxlZDonLCBmYWxsYmFja0Vycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChncm9xRXJyb3IuZXJyb3I/LmNvZGUgPT09ICdyYXRlX2xpbWl0X2V4Y2VlZGVkJykge1xuICAgICAgICBjb25zb2xlLmxvZygnUmF0ZSBsaW1pdCBleGNlZWRlZCwgdXNpbmcgZmFsbGJhY2sgcmVzcG9uc2UnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gUmV0dXJuIGZhbGxiYWNrIHJlc3BvbnNlXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIG92ZXJ2aWV3OiBcIlBow6JuIHTDrWNoIGThu68gbGnhu4d1IGNoaSBuaMOhbmggduG7m2kgaGnhu4d1IHN14bqldCBraW5oIGRvYW5oXCIsXG4gICAgICB0b3BQZXJmb3JtZXI6IFwiQ2hpIG5ow6FuaCBjw7MgaGnhu4d1IHN14bqldCB04buRdCBuaOG6pXQgdHJvbmcgaOG7hyB0aOG7kW5nXCIsXG4gICAgICByZWNvbW1lbmRhdGlvbnM6IFtcIlThu5FpIMawdSBow7NhIGNoaSBwaMOtIHF14bqjbmcgY8Ohb1wiLCBcIkPhuqNpIHRoaeG7h24gaGnhu4d1IHF14bqjIGvDqm5oIGLDoW4gaMOgbmdcIiwgXCJQaMOhdCB0cmnhu4NuIGNoaeG6v24gbMaw4bujYyBt4bubaVwiXSxcbiAgICAgIHJpc2tzOiBbXCJUaGVvIGTDtWkgeHUgaMaw4bubbmcgdGjhu4sgdHLGsOG7nW5nXCIsIFwiS2nhu4NtIHNvw6F0IHLhu6dpIHJvIHTDoGkgY2jDrW5oXCIsIFwiUXXhuqNuIGzDvSBj4bqhbmggdHJhbmhcIl0sXG4gICAgICBkZXRhaWxlZEFuYWx5c2lzOiBbXCJQaMOibiB0w61jaCBoaeG7h3UgcXXhuqMgY2hpIG5ow6FuaFwiLCBcIsSQw6FuaCBnacOhIGvDqm5oIGLDoW4gaMOgbmdcIiwgXCJYZW0geMOpdCB4dSBoxrDhu5tuZyB0deG6p25cIiwgXCJU4buRaSDGsHUgaMOzYSBST0lcIl0sXG4gICAgICB0cmVuZHM6IFwiWHUgaMaw4bubbmcgdMSDbmcgdHLGsOG7n25nIOG7lW4gxJHhu4tuaCB24bubaSB0aeG7gW0gbsSDbmcgY+G6o2kgdGhp4buHblwiXG4gICAgfSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVBSUluc2lnaHRzKGRhdGE6IGFueSkge1xuICBjb25zdCB7XG4gICAgdG90YWxSZXZlbnVlLFxuICAgIHRvdGFsQWRDb3N0LFxuICAgIGF2Z1JPSSxcbiAgICBicmFuY2hBbmFseXNpcyxcbiAgICBjaGFubmVsQW5hbHlzaXMsXG4gICAgd2Vla2x5QW5hbHlzaXMsXG4gICAgdGltZVR5cGUsXG4gICAgdGltZVZhbHVlLFxuICAgIGJyYW5jaCxcbiAgICB5ZWFyXG4gIH0gPSBkYXRhO1xuXG4gIGNvbnN0IGluc2lnaHRzOiB7XG4gICAgb3ZlcnZpZXc6IHN0cmluZztcbiAgICB0b3BQZXJmb3JtZXI6IHN0cmluZztcbiAgICBzdW1tYXJ5OiBzdHJpbmc7XG4gICAgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXTtcbiAgICB0cmVuZHM6IHN0cmluZztcbiAgICByaXNrczogc3RyaW5nW107XG4gICAgZGV0YWlsZWRBbmFseXNpczogc3RyaW5nW107XG4gICAgcGVyZm9ybWFuY2VNZXRyaWNzOiB7XG4gICAgICByZXZlbnVlR3Jvd3RoOiBzdHJpbmc7XG4gICAgICBlZmZpY2llbmN5U2NvcmU6IHN0cmluZztcbiAgICAgIG1hcmtldFNoYXJlOiBzdHJpbmc7XG4gICAgICBjb3N0RWZmZWN0aXZlbmVzczogc3RyaW5nO1xuICAgIH07XG4gIH0gPSB7XG4gICAgb3ZlcnZpZXc6ICcnLFxuICAgIHRvcFBlcmZvcm1lcjogJycsXG4gICAgc3VtbWFyeTogJycsXG4gICAgcmVjb21tZW5kYXRpb25zOiBbXSxcbiAgICB0cmVuZHM6ICcnLFxuICAgIHJpc2tzOiBbXSxcbiAgICBkZXRhaWxlZEFuYWx5c2lzOiBbXSxcbiAgICBwZXJmb3JtYW5jZU1ldHJpY3M6IHtcbiAgICAgIHJldmVudWVHcm93dGg6ICfEkGFuZyBwaMOibiB0w61jaC4uLicsXG4gICAgICBlZmZpY2llbmN5U2NvcmU6ICfEkGFuZyBwaMOibiB0w61jaC4uLicsXG4gICAgICBtYXJrZXRTaGFyZTogJ8SQYW5nIHBow6JuIHTDrWNoLi4uJyxcbiAgICAgIGNvc3RFZmZlY3RpdmVuZXNzOiAnxJBhbmcgcGjDom4gdMOtY2guLi4nXG4gICAgfVxuICB9O1xuXG4gIC8vID09PSBQSMOCTiBUw41DSCBUSMOUTkcgTUlOSCBE4buwQSBUUsOKTiBE4buuIExJ4buGVSBUSOG7sEMgVOG6viA9PT1cbiAgXG4gIC8vIDEuIFTDrW5oIHRvw6FuIGPDoWMgbmfGsOG7oW5nIMSR4buZbmcgZOG7sWEgdHLDqm4gZOG7ryBsaeG7h3UgdGjhu7FjIHThur9cbiAgY29uc3QgYWxsUk9JcyA9IE9iamVjdC52YWx1ZXMoYnJhbmNoQW5hbHlzaXMpLm1hcCgoYjogYW55KSA9PiBiLnJvaSk7XG4gIGNvbnN0IGFsbFJldmVudWVzID0gT2JqZWN0LnZhbHVlcyhicmFuY2hBbmFseXNpcykubWFwKChiOiBhbnkpID0+IGIucmV2ZW51ZSk7XG4gIGNvbnN0IGFsbEFkQ29zdHMgPSBPYmplY3QudmFsdWVzKGJyYW5jaEFuYWx5c2lzKS5tYXAoKGI6IGFueSkgPT4gYi5hZENvc3QpO1xuICBcbiAgY29uc3QgYXZnUk9JT3ZlcmFsbCA9IGFsbFJPSXMucmVkdWNlKChzdW0sIHJvaSkgPT4gc3VtICsgcm9pLCAwKSAvIGFsbFJPSXMubGVuZ3RoO1xuICBjb25zdCBtYXhST0kgPSBNYXRoLm1heCguLi5hbGxST0lzKTtcbiAgY29uc3QgbWluUk9JID0gTWF0aC5taW4oLi4uYWxsUk9Jcyk7XG4gIGNvbnN0IHJvaVN0ZERldiA9IE1hdGguc3FydChhbGxST0lzLnJlZHVjZSgoc3VtLCByb2kpID0+IHN1bSArIE1hdGgucG93KHJvaSAtIGF2Z1JPSU92ZXJhbGwsIDIpLCAwKSAvIGFsbFJPSXMubGVuZ3RoKTtcbiAgXG4gIGNvbnN0IGF2Z1JldmVudWUgPSBhbGxSZXZlbnVlcy5yZWR1Y2UoKHN1bSwgcmV2KSA9PiBzdW0gKyByZXYsIDApIC8gYWxsUmV2ZW51ZXMubGVuZ3RoO1xuICBjb25zdCBtYXhSZXZlbnVlID0gTWF0aC5tYXgoLi4uYWxsUmV2ZW51ZXMpO1xuICBjb25zdCBtaW5SZXZlbnVlID0gTWF0aC5taW4oLi4uYWxsUmV2ZW51ZXMpO1xuICBcbiAgLy8gMi4gxJDhu4tuaCBuZ2jEqWEgbmfGsOG7oW5nIHRow7RuZyBtaW5oXG4gIGNvbnN0IGhpZ2hST0lUaHJlc2hvbGQgPSBhdmdST0lPdmVyYWxsICsgcm9pU3RkRGV2O1xuICBjb25zdCBsb3dST0lUaHJlc2hvbGQgPSBhdmdST0lPdmVyYWxsIC0gcm9pU3RkRGV2O1xuICBjb25zdCBleGNlcHRpb25hbFJPSVRocmVzaG9sZCA9IGF2Z1JPSU92ZXJhbGwgKyAocm9pU3RkRGV2ICogMS41KTtcbiAgXG4gIGNvbnN0IGhpZ2hSZXZlbnVlVGhyZXNob2xkID0gYXZnUmV2ZW51ZSArIChNYXRoLnNxcnQoYWxsUmV2ZW51ZXMucmVkdWNlKChzdW0sIHJldikgPT4gc3VtICsgTWF0aC5wb3cocmV2IC0gYXZnUmV2ZW51ZSwgMiksIDApIC8gYWxsUmV2ZW51ZXMubGVuZ3RoKSk7XG4gIGNvbnN0IGxvd1JldmVudWVUaHJlc2hvbGQgPSBhdmdSZXZlbnVlIC0gKE1hdGguc3FydChhbGxSZXZlbnVlcy5yZWR1Y2UoKHN1bSwgcmV2KSA9PiBzdW0gKyBNYXRoLnBvdyhyZXYgLSBhdmdSZXZlbnVlLCAyKSwgMCkgLyBhbGxSZXZlbnVlcy5sZW5ndGgpKTtcblxuICAvLyAzLiBT4butIGThu6VuZyBHcm9xIEFJIMSR4buDIHThuqFvIGluc2lnaHRzIHThu7Egbmhpw6puXG4gIGNvbnN0IHRpbWVEZXNjcmlwdGlvbiA9IHRpbWVUeXBlID09PSAnd2VlaycgPyBgdHXhuqduICR7dGltZVZhbHVlfWAgOiBcbiAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lVHlwZSA9PT0gJ21vbnRoJyA/IGB0aMOhbmcgJHt0aW1lVmFsdWV9YCA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgIGBxdcO9ICR7dGltZVZhbHVlfWA7XG4gIFxuICBpZiAoYnJhbmNoICYmIGJyYW5jaCAhPT0gJ2FsbCcpIHtcbiAgICAvLyBLaGkgY2jhu41uIDEgY2hpIG5ow6FuaCBj4bulIHRo4buDLCBz4butIGThu6VuZyBBSSDEkeG7gyBwaMOibiB0w61jaFxuICAgIGNvbnN0IGJyYW5jaERhdGEgPSBicmFuY2hBbmFseXNpc1ticmFuY2hdO1xuICAgIFxuICAgIC8vIEtp4buDbSB0cmEgYnJhbmNoRGF0YSBjw7MgdOG7k24gdOG6oWkga2jDtG5nXG4gICAgaWYgKCFicmFuY2hEYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhgQnJhbmNoIGRhdGEgbm90IGZvdW5kIGZvcjogJHticmFuY2h9YCk7XG4gICAgICAvLyBT4butIGThu6VuZyBmYWxsYmFjayBpbnNpZ2h0c1xuICAgICAgY29uc3QgZmFsbGJhY2tEYXRhID0geyB0b3RhbFJldmVudWUsIGF2Z1JPSSwgYnJhbmNoLCB0aW1lRGVzY3JpcHRpb24sIHllYXIgfTtcbiAgICAgIGNvbnN0IGZhbGxiYWNrSW5zaWdodHMgPSBjcmVhdGVGYWxsYmFja0luc2lnaHRzKGZhbGxiYWNrRGF0YSk7XG4gICAgICBpbnNpZ2h0cy5vdmVydmlldyA9IGZhbGxiYWNrSW5zaWdodHMub3ZlcnZpZXc7XG4gICAgICBpbnNpZ2h0cy50b3BQZXJmb3JtZXIgPSBmYWxsYmFja0luc2lnaHRzLnRvcFBlcmZvcm1lcjtcbiAgICAgIGluc2lnaHRzLnJlY29tbWVuZGF0aW9ucyA9IGZhbGxiYWNrSW5zaWdodHMucmVjb21tZW5kYXRpb25zO1xuICAgICAgaW5zaWdodHMucmlza3MgPSBmYWxsYmFja0luc2lnaHRzLnJpc2tzO1xuICAgICAgaW5zaWdodHMuZGV0YWlsZWRBbmFseXNpcyA9IGZhbGxiYWNrSW5zaWdodHMuZGV0YWlsZWRBbmFseXNpcztcbiAgICAgIGluc2lnaHRzLnRyZW5kcyA9IGZhbGxiYWNrSW5zaWdodHMudHJlbmRzO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGJyYW5jaFJldmVudWUgPSBicmFuY2hEYXRhLnJldmVudWU7XG4gICAgICAgIGNvbnN0IGJyYW5jaEFkQ29zdCA9IGJyYW5jaERhdGEuYWRDb3N0O1xuICAgICAgICBjb25zdCBicmFuY2hST0kgPSBicmFuY2hEYXRhLnJvaTtcbiAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHJldmVudWVQZXJEYXkgPSBicmFuY2hSZXZlbnVlIC8gKHRpbWVUeXBlID09PSAnd2VlaycgPyA3IDogdGltZVR5cGUgPT09ICdtb250aCcgPyAzMCA6IDkwKTtcbiAgICAgICAgY29uc3QgYWRDb3N0UmF0aW8gPSAoYnJhbmNoQWRDb3N0IC8gYnJhbmNoUmV2ZW51ZSkgKiAxMDA7XG4gICAgXG4gICAgLy8gUGjDom4gdMOtY2ggaGnhu4d1IHN14bqldCB0xrDGoW5nIMSR4buRaSB24bubaSB04bqldCBj4bqjIGNoaSBuaMOhbmhcbiAgICBjb25zdCByb2lSYW5rID0gYWxsUk9Jcy5maWx0ZXIocm9pID0+IHJvaSA+IGJyYW5jaFJPSSkubGVuZ3RoICsgMTtcbiAgICBjb25zdCByZXZlbnVlUmFuayA9IGFsbFJldmVudWVzLmZpbHRlcihyZXYgPT4gcmV2ID4gYnJhbmNoUmV2ZW51ZSkubGVuZ3RoICsgMTtcbiAgICBjb25zdCB0b3RhbEJyYW5jaGVzID0gYWxsUk9Jcy5sZW5ndGg7XG4gICAgXG4gICAgY29uc3QgcGVyZm9ybWFuY2VMZXZlbCA9IGJyYW5jaFJPSSA+IGV4Y2VwdGlvbmFsUk9JVGhyZXNob2xkID8gJ1h14bqldCBz4bqvYycgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmNoUk9JID4gaGlnaFJPSVRocmVzaG9sZCA/ICdU4buRdCcgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmNoUk9JID4gYXZnUk9JT3ZlcmFsbCA/ICdUcsOqbiB0cnVuZyBiw6xuaCcgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmNoUk9JID4gbG93Uk9JVGhyZXNob2xkID8gJ1RydW5nIGLDrG5oJyA6ICdD4bqnbiBj4bqjaSB0aGnhu4duJztcbiAgICBcbiAgICAvLyBU4bqhbyBwcm9tcHQgbmfhuq9uIGfhu41uIGNobyBBSVxuICAgIGNvbnN0IGFpUHJvbXB0ID0gYFBow6JuIHTDrWNoIGNoaSBuaMOhbmggJHticmFuY2h9OlxuRG9hbmggdGh1OiAkeyhicmFuY2hSZXZlbnVlLzEwMDAwMDAwMDApLnRvRml4ZWQoMil9IHThu7cgVk5ELCBST0k6ICR7YnJhbmNoUk9JLnRvRml4ZWQoMil9ICh44bq/cCBo4bqhbmcgJHtyb2lSYW5rfS8ke3RvdGFsQnJhbmNoZXN9KVxuQ2hpIHBow606ICR7KGJyYW5jaEFkQ29zdC8xMDAwMDAwKS50b0ZpeGVkKDApfSB0cmnhu4d1IFZORCwgaGnhu4d1IHN14bqldDogJHtwZXJmb3JtYW5jZUxldmVsfVxuUk9JIHRydW5nIGLDrG5oIGjhu4cgdGjhu5FuZzogJHthdmdST0lPdmVyYWxsLnRvRml4ZWQoMil9XG5Lw6puaDogJHtPYmplY3QuZW50cmllcyhjaGFubmVsQW5hbHlzaXMpLm1hcCgoW2NoYW5uZWwsIGRhdGFdOiBbc3RyaW5nLCBhbnldKSA9PiBcbiAgYCR7Y2hhbm5lbH0oJHtkYXRhLnBlcmNlbnRhZ2UudG9GaXhlZCgxKX0lLCBST0k6JHtkYXRhLnJvaS50b0ZpeGVkKDIpfSlgXG4pLmpvaW4oJywgJyl9YDtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCBhaVJlc3BvbnNlID0gYXdhaXQgZ2VuZXJhdGVHcm9xSW5zaWdodHMoYWlQcm9tcHQpO1xuICAgICAgXG4gICAgICAvLyBTYW5pdGl6ZSBKU09OIGZhbGxiYWNrIHbhu5tpIGhlbHBlciBt4bubaVxuICAgICAgbGV0IGFpSW5zaWdodHM7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjbGVhblJlc3BvbnNlID0gY2xlYW5Kc29uUmVzcG9uc2UoYWlSZXNwb25zZSk7XG4gICAgICAgIGFpSW5zaWdodHMgPSBzYWZlUGFyc2UoY2xlYW5SZXNwb25zZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBSSByZXNwb25zZSBwYXJzZWQgc3VjY2Vzc2Z1bGx5OicsIGFpSW5zaWdodHMpO1xuICAgICAgfSBjYXRjaCAocGFyc2VFcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnQUkgcmVzcG9uc2UgaXMgbm90IHZhbGlkIEpTT046JywgYWlSZXNwb25zZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQYXJzZSBlcnJvcjonLCBwYXJzZUVycm9yKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSBvbmUgbW9yZSB0aW1lIHdpdGggYSBtb3JlIGFnZ3Jlc3NpdmUgYXBwcm9hY2hcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgbGFzdEF0dGVtcHQgPSBhaVJlc3BvbnNlO1xuICAgICAgICAgIC8vIEZpbmQgYW55dGhpbmcgdGhhdCBsb29rcyBsaWtlIEpTT05cbiAgICAgICAgICBjb25zdCBtYXRjaGVzID0gbGFzdEF0dGVtcHQubWF0Y2goL1xce1tee31dKig/Olxce1tee31dKlxcfVtee31dKikqXFx9L2cpO1xuICAgICAgICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gVGFrZSB0aGUgbG9uZ2VzdCBtYXRjaCB0aGF0J3MgdW5kZXIgNTAwMCBjaGFycyAobW9zdCBsaWtlbHkgdG8gYmUgY29tcGxldGUgYW5kIHZhbGlkKVxuICAgICAgICAgICAgY29uc3QgdmFsaWRNYXRjaGVzID0gbWF0Y2hlcy5maWx0ZXIoKG1hdGNoOiBzdHJpbmcpID0+IG1hdGNoLmxlbmd0aCA8IDUwMDApO1xuICAgICAgICAgICAgaWYgKHZhbGlkTWF0Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxvbmdlc3RNYXRjaCA9IHZhbGlkTWF0Y2hlcy5yZWR1Y2UoKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PiBhLmxlbmd0aCA+IGIubGVuZ3RoID8gYSA6IGIpO1xuICAgICAgICAgICAgICBhaUluc2lnaHRzID0gc2FmZVBhcnNlKGxvbmdlc3RNYXRjaCk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBSSByZXNwb25zZSBwYXJzZWQgb24gc2Vjb25kIGF0dGVtcHQ6JywgYWlJbnNpZ2h0cyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhaUluc2lnaHRzID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYWlJbnNpZ2h0cyA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChzZWNvbmRFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdTZWNvbmQgcGFyc2UgYXR0ZW1wdCBhbHNvIGZhaWxlZDonLCBzZWNvbmRFcnJvcik7XG4gICAgICAgICAgYWlJbnNpZ2h0cyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gVmFsaWRhdGUgdsOgIHBhcnNlIHbhu5tpIHNjaGVtYVxuICAgICAgaWYgKGFpSW5zaWdodHMgJiYgdHlwZW9mIGFpSW5zaWdodHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdmFsaWRhdGVkSW5zaWdodHMgPSBJbnNpZ2h0c1NjaGVtYS5wYXJzZShhaUluc2lnaHRzKTtcbiAgICAgICAgICBpbnNpZ2h0cy5vdmVydmlldyA9IHZhbGlkYXRlZEluc2lnaHRzLm92ZXJ2aWV3O1xuICAgICAgICAgIGluc2lnaHRzLnRvcFBlcmZvcm1lciA9IHZhbGlkYXRlZEluc2lnaHRzLnRvcFBlcmZvcm1lcjtcbiAgICAgICAgICBpbnNpZ2h0cy5yZWNvbW1lbmRhdGlvbnMgPSB2YWxpZGF0ZWRJbnNpZ2h0cy5yZWNvbW1lbmRhdGlvbnM7XG4gICAgICAgICAgaW5zaWdodHMucmlza3MgPSB2YWxpZGF0ZWRJbnNpZ2h0cy5yaXNrcztcbiAgICAgICAgICBpbnNpZ2h0cy5kZXRhaWxlZEFuYWx5c2lzID0gdmFsaWRhdGVkSW5zaWdodHMuZGV0YWlsZWRBbmFseXNpcztcbiAgICAgICAgICBpbnNpZ2h0cy50cmVuZHMgPSB2YWxpZGF0ZWRJbnNpZ2h0cy50cmVuZHM7XG4gICAgICAgIH0gY2F0Y2ggKHZhbGlkYXRpb25FcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdTY2hlbWEgdmFsaWRhdGlvbiBmYWlsZWQsIHVzaW5nIGZhbGxiYWNrOicsIHZhbGlkYXRpb25FcnJvcik7XG4gICAgICAgICAgLy8gRmFsbGJhY2sgdG8gYmFzaWMgYW5hbHlzaXMgaWYgQUkgZmFpbHNcbiAgICAgICAgICBjb25zdCBmYWxsYmFja0RhdGEgPSB7IHRvdGFsUmV2ZW51ZSwgYXZnUk9JLCBicmFuY2gsIHRpbWVEZXNjcmlwdGlvbiwgeWVhciB9O1xuICAgICAgICAgIGNvbnN0IGZhbGxiYWNrSW5zaWdodHMgPSBjcmVhdGVGYWxsYmFja0luc2lnaHRzKGZhbGxiYWNrRGF0YSk7XG4gICAgICAgICAgaW5zaWdodHMub3ZlcnZpZXcgPSBmYWxsYmFja0luc2lnaHRzLm92ZXJ2aWV3O1xuICAgICAgICAgIGluc2lnaHRzLnRvcFBlcmZvcm1lciA9IGZhbGxiYWNrSW5zaWdodHMudG9wUGVyZm9ybWVyO1xuICAgICAgICAgIGluc2lnaHRzLnJlY29tbWVuZGF0aW9ucyA9IGZhbGxiYWNrSW5zaWdodHMucmVjb21tZW5kYXRpb25zO1xuICAgICAgICAgIGluc2lnaHRzLnJpc2tzID0gZmFsbGJhY2tJbnNpZ2h0cy5yaXNrcztcbiAgICAgICAgICBpbnNpZ2h0cy5kZXRhaWxlZEFuYWx5c2lzID0gZmFsbGJhY2tJbnNpZ2h0cy5kZXRhaWxlZEFuYWx5c2lzO1xuICAgICAgICAgIGluc2lnaHRzLnRyZW5kcyA9IGZhbGxiYWNrSW5zaWdodHMudHJlbmRzO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGYWxsYmFjayB0byBiYXNpYyBhbmFseXNpcyBpZiBBSSBmYWlsc1xuICAgICAgICBjb25zdCBmYWxsYmFja0RhdGEgPSB7IHRvdGFsUmV2ZW51ZSwgYXZnUk9JLCBicmFuY2gsIHRpbWVEZXNjcmlwdGlvbiwgeWVhciB9O1xuICAgICAgICBjb25zdCBmYWxsYmFja0luc2lnaHRzID0gY3JlYXRlRmFsbGJhY2tJbnNpZ2h0cyhmYWxsYmFja0RhdGEpO1xuICAgICAgICBpbnNpZ2h0cy5vdmVydmlldyA9IGZhbGxiYWNrSW5zaWdodHMub3ZlcnZpZXc7XG4gICAgICAgIGluc2lnaHRzLnRvcFBlcmZvcm1lciA9IGZhbGxiYWNrSW5zaWdodHMudG9wUGVyZm9ybWVyO1xuICAgICAgICBpbnNpZ2h0cy5yZWNvbW1lbmRhdGlvbnMgPSBmYWxsYmFja0luc2lnaHRzLnJlY29tbWVuZGF0aW9ucztcbiAgICAgICAgaW5zaWdodHMucmlza3MgPSBmYWxsYmFja0luc2lnaHRzLnJpc2tzO1xuICAgICAgICBpbnNpZ2h0cy5kZXRhaWxlZEFuYWx5c2lzID0gZmFsbGJhY2tJbnNpZ2h0cy5kZXRhaWxlZEFuYWx5c2lzO1xuICAgICAgICBpbnNpZ2h0cy50cmVuZHMgPSBmYWxsYmFja0luc2lnaHRzLnRyZW5kcztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyBBSSBpbnNpZ2h0czonLCBlcnJvcik7XG4gICAgICAvLyBGYWxsYmFjayB0byBiYXNpYyBhbmFseXNpcyBpZiBBSSBmYWlsc1xuICAgICAgY29uc3QgZmFsbGJhY2tEYXRhID0geyB0b3RhbFJldmVudWUsIGF2Z1JPSSwgYnJhbmNoLCB0aW1lRGVzY3JpcHRpb24sIHllYXIgfTtcbiAgICAgIGNvbnN0IGZhbGxiYWNrSW5zaWdodHMgPSBjcmVhdGVGYWxsYmFja0luc2lnaHRzKGZhbGxiYWNrRGF0YSk7XG4gICAgICBpbnNpZ2h0cy5vdmVydmlldyA9IGZhbGxiYWNrSW5zaWdodHMub3ZlcnZpZXc7XG4gICAgICBpbnNpZ2h0cy50b3BQZXJmb3JtZXIgPSBmYWxsYmFja0luc2lnaHRzLnRvcFBlcmZvcm1lcjtcbiAgICAgIGluc2lnaHRzLnJlY29tbWVuZGF0aW9ucyA9IGZhbGxiYWNrSW5zaWdodHMucmVjb21tZW5kYXRpb25zO1xuICAgICAgaW5zaWdodHMucmlza3MgPSBmYWxsYmFja0luc2lnaHRzLnJpc2tzO1xuICAgICAgaW5zaWdodHMuZGV0YWlsZWRBbmFseXNpcyA9IGZhbGxiYWNrSW5zaWdodHMuZGV0YWlsZWRBbmFseXNpcztcbiAgICAgIGluc2lnaHRzLnRyZW5kcyA9IGZhbGxiYWNrSW5zaWdodHMudHJlbmRzO1xuICAgIH1cbiAgfVxuICB9IGVsc2Uge1xuICAgIC8vIFPhu60gZOG7pW5nIEFJIGNobyBwaMOibiB0w61jaCB04bqldCBj4bqjIGNoaSBuaMOhbmhcbiAgICBjb25zdCByZXZlbnVlUGVyRGF5ID0gdG90YWxSZXZlbnVlIC8gKHRpbWVUeXBlID09PSAnd2VlaycgPyA3IDogdGltZVR5cGUgPT09ICdtb250aCcgPyAzMCA6IDkwKTtcbiAgICBjb25zdCBhZENvc3RSYXRpbyA9ICh0b3RhbEFkQ29zdCAvIHRvdGFsUmV2ZW51ZSkgKiAxMDA7XG4gICAgY29uc3QgYnJhbmNoQ291bnQgPSBPYmplY3Qua2V5cyhicmFuY2hBbmFseXNpcykubGVuZ3RoO1xuICAgIGNvbnN0IGNoYW5uZWxDb3VudCA9IE9iamVjdC5rZXlzKGNoYW5uZWxBbmFseXNpcykubGVuZ3RoO1xuICAgIFxuICAgIC8vIFBow6JuIHTDrWNoIHBow6JuIGLhu5VcbiAgICBjb25zdCByZXZlbnVlRGlzdHJpYnV0aW9uID0gT2JqZWN0LnZhbHVlcyhicmFuY2hBbmFseXNpcykubWFwKChiOiBhbnkpID0+IGIucGVyY2VudGFnZSk7XG4gICAgY29uc3QgcmV2ZW51ZVZhcmlhbmNlID0gcmV2ZW51ZURpc3RyaWJ1dGlvbi5yZWR1Y2UoKHN1bSwgcCkgPT4gc3VtICsgTWF0aC5wb3cocCAtICgxMDAvYnJhbmNoQ291bnQpLCAyKSwgMCkgLyBicmFuY2hDb3VudDtcbiAgICBjb25zdCBkaXN0cmlidXRpb25UeXBlID0gcmV2ZW51ZVZhcmlhbmNlID4gMjAwID8gJ1Thuq1wIHRydW5nIGNhbycgOiByZXZlbnVlVmFyaWFuY2UgPiAxMDAgPyAnVOG6rXAgdHJ1bmcgduG7q2EnIDogJ0PDom4gYuG6sW5nJztcbiAgICBcbiAgICAvLyBU4bqhbyBwcm9tcHQgbmfhuq9uIGfhu41uIGNobyBBSSBwaMOibiB0w61jaCB04bqldCBj4bqjIGNoaSBuaMOhbmhcbiAgICBjb25zdCBhbGxCcmFuY2hlc1Byb21wdCA9IGBQaMOibiB0w61jaCBo4buHIHRo4buRbmcgJHt0aW1lRGVzY3JpcHRpb259ICR7eWVhcn06XG5U4buVbmcgZG9hbmggdGh1OiAkeyh0b3RhbFJldmVudWUvMTAwMDAwMDAwMCkudG9GaXhlZCgyKX0gdOG7tyBWTkQsIFJPSTogJHthdmdST0kudG9GaXhlZCgyKX1cbkRvYW5oIHRodS9uZ8OgeTogJHsocmV2ZW51ZVBlckRheS8xMDAwMDAwKS50b0ZpeGVkKDEpfSB0cmnhu4d1IFZORCwgJHticmFuY2hDb3VudH0gY2hpIG5ow6FuaCwgJHtjaGFubmVsQ291bnR9IGvDqm5oXG5DaGkgbmjDoW5oOiAke09iamVjdC5lbnRyaWVzKGJyYW5jaEFuYWx5c2lzKS5tYXAoKFticmFuY2hOYW1lLCBkYXRhXTogW3N0cmluZywgYW55XSkgPT4gXG4gIGAke2JyYW5jaE5hbWV9KCR7KGRhdGEucmV2ZW51ZS8xMDAwMDAwMDAwKS50b0ZpeGVkKDIpfSB04bu3LCAke2RhdGEucGVyY2VudGFnZS50b0ZpeGVkKDEpfSUsIFJPSToke2RhdGEucm9pLnRvRml4ZWQoMil9KWBcbikuam9pbignLCAnKX1cbkvDqm5oOiAke09iamVjdC5lbnRyaWVzKGNoYW5uZWxBbmFseXNpcykubWFwKChbY2hhbm5lbCwgZGF0YV06IFtzdHJpbmcsIGFueV0pID0+IFxuICBgJHtjaGFubmVsfSgke2RhdGEucGVyY2VudGFnZS50b0ZpeGVkKDEpfSUsIFJPSToke2RhdGEucm9pLnRvRml4ZWQoMil9KWBcbikuam9pbignLCAnKX1gO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGFpUmVzcG9uc2UgPSBhd2FpdCBnZW5lcmF0ZUdyb3FJbnNpZ2h0cyhhbGxCcmFuY2hlc1Byb21wdCk7XG4gICAgICBcbiAgICAgIC8vIFNhbml0aXplIEpTT04gZmFsbGJhY2sgduG7m2kgaGVscGVyIG3hu5tpXG4gICAgICBsZXQgYWlJbnNpZ2h0cztcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNsZWFuUmVzcG9uc2UgPSBjbGVhbkpzb25SZXNwb25zZShhaVJlc3BvbnNlKTtcbiAgICAgICAgYWlJbnNpZ2h0cyA9IHNhZmVQYXJzZShjbGVhblJlc3BvbnNlKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0FJIHJlc3BvbnNlIGZvciBhbGwgYnJhbmNoZXMgcGFyc2VkIHN1Y2Nlc3NmdWxseTonLCBhaUluc2lnaHRzKTtcbiAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FJIHJlc3BvbnNlIGZvciBhbGwgYnJhbmNoZXMgaXMgbm90IHZhbGlkIEpTT046JywgYWlSZXNwb25zZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdQYXJzZSBlcnJvcjonLCBwYXJzZUVycm9yKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSBvbmUgbW9yZSB0aW1lIHdpdGggYSBtb3JlIGFnZ3Jlc3NpdmUgYXBwcm9hY2hcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBsZXQgbGFzdEF0dGVtcHQgPSBhaVJlc3BvbnNlO1xuICAgICAgICAgIC8vIEZpbmQgYW55dGhpbmcgdGhhdCBsb29rcyBsaWtlIEpTT05cbiAgICAgICAgICBjb25zdCBtYXRjaGVzID0gbGFzdEF0dGVtcHQubWF0Y2goL1xce1tee31dKig/Olxce1tee31dKlxcfVtee31dKikqXFx9L2cpO1xuICAgICAgICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gVGFrZSB0aGUgbG9uZ2VzdCBtYXRjaCB0aGF0J3MgdW5kZXIgNTAwMCBjaGFycyAobW9zdCBsaWtlbHkgdG8gYmUgY29tcGxldGUgYW5kIHZhbGlkKVxuICAgICAgICAgICAgY29uc3QgdmFsaWRNYXRjaGVzID0gbWF0Y2hlcy5maWx0ZXIoKG1hdGNoOiBzdHJpbmcpID0+IG1hdGNoLmxlbmd0aCA8IDUwMDApO1xuICAgICAgICAgICAgaWYgKHZhbGlkTWF0Y2hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGxvbmdlc3RNYXRjaCA9IHZhbGlkTWF0Y2hlcy5yZWR1Y2UoKGE6IHN0cmluZywgYjogc3RyaW5nKSA9PiBhLmxlbmd0aCA+IGIubGVuZ3RoID8gYSA6IGIpO1xuICAgICAgICAgICAgICBhaUluc2lnaHRzID0gc2FmZVBhcnNlKGxvbmdlc3RNYXRjaCk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBSSByZXNwb25zZSBmb3IgYWxsIGJyYW5jaGVzIHBhcnNlZCBvbiBzZWNvbmQgYXR0ZW1wdDonLCBhaUluc2lnaHRzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGFpSW5zaWdodHMgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhaUluc2lnaHRzID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKHNlY29uZEVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ1NlY29uZCBwYXJzZSBhdHRlbXB0IGZvciBhbGwgYnJhbmNoZXMgYWxzbyBmYWlsZWQ6Jywgc2Vjb25kRXJyb3IpO1xuICAgICAgICAgIGFpSW5zaWdodHMgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFZhbGlkYXRlIHbDoCBwYXJzZSB24bubaSBzY2hlbWFcbiAgICAgIGlmIChhaUluc2lnaHRzICYmIHR5cGVvZiBhaUluc2lnaHRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHZhbGlkYXRlZEluc2lnaHRzID0gSW5zaWdodHNTY2hlbWEucGFyc2UoYWlJbnNpZ2h0cyk7XG4gICAgICAgICAgaW5zaWdodHMub3ZlcnZpZXcgPSB2YWxpZGF0ZWRJbnNpZ2h0cy5vdmVydmlldztcbiAgICAgICAgICBpbnNpZ2h0cy50b3BQZXJmb3JtZXIgPSB2YWxpZGF0ZWRJbnNpZ2h0cy50b3BQZXJmb3JtZXI7XG4gICAgICAgICAgaW5zaWdodHMucmVjb21tZW5kYXRpb25zID0gdmFsaWRhdGVkSW5zaWdodHMucmVjb21tZW5kYXRpb25zO1xuICAgICAgICAgIGluc2lnaHRzLnJpc2tzID0gdmFsaWRhdGVkSW5zaWdodHMucmlza3M7XG4gICAgICAgICAgaW5zaWdodHMuZGV0YWlsZWRBbmFseXNpcyA9IHZhbGlkYXRlZEluc2lnaHRzLmRldGFpbGVkQW5hbHlzaXM7XG4gICAgICAgICAgaW5zaWdodHMudHJlbmRzID0gdmFsaWRhdGVkSW5zaWdodHMudHJlbmRzO1xuICAgICAgICB9IGNhdGNoICh2YWxpZGF0aW9uRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnU2NoZW1hIHZhbGlkYXRpb24gZmFpbGVkIGZvciBhbGwgYnJhbmNoZXMsIHVzaW5nIGZhbGxiYWNrOicsIHZhbGlkYXRpb25FcnJvcik7XG4gICAgICAgICAgLy8gRmFsbGJhY2sgdG8gYmFzaWMgYW5hbHlzaXMgaWYgQUkgZmFpbHNcbiAgICAgICAgICBjb25zdCBmYWxsYmFja0RhdGEgPSB7IHRvdGFsUmV2ZW51ZSwgYXZnUk9JLCBicmFuY2g6ICdhbGwnLCB0aW1lRGVzY3JpcHRpb24sIHllYXIgfTtcbiAgICAgICAgICBjb25zdCBmYWxsYmFja0luc2lnaHRzID0gY3JlYXRlRmFsbGJhY2tJbnNpZ2h0cyhmYWxsYmFja0RhdGEpO1xuICAgICAgICAgIGluc2lnaHRzLm92ZXJ2aWV3ID0gZmFsbGJhY2tJbnNpZ2h0cy5vdmVydmlldztcbiAgICAgICAgICBpbnNpZ2h0cy50b3BQZXJmb3JtZXIgPSBmYWxsYmFja0luc2lnaHRzLnRvcFBlcmZvcm1lcjtcbiAgICAgICAgICBpbnNpZ2h0cy5yZWNvbW1lbmRhdGlvbnMgPSBmYWxsYmFja0luc2lnaHRzLnJlY29tbWVuZGF0aW9ucztcbiAgICAgICAgICBpbnNpZ2h0cy5yaXNrcyA9IGZhbGxiYWNrSW5zaWdodHMucmlza3M7XG4gICAgICAgICAgaW5zaWdodHMuZGV0YWlsZWRBbmFseXNpcyA9IGZhbGxiYWNrSW5zaWdodHMuZGV0YWlsZWRBbmFseXNpcztcbiAgICAgICAgICBpbnNpZ2h0cy50cmVuZHMgPSBmYWxsYmFja0luc2lnaHRzLnRyZW5kcztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gYmFzaWMgYW5hbHlzaXMgaWYgQUkgZmFpbHNcbiAgICAgICAgY29uc3QgZmFsbGJhY2tEYXRhID0geyB0b3RhbFJldmVudWUsIGF2Z1JPSSwgYnJhbmNoOiAnYWxsJywgdGltZURlc2NyaXB0aW9uLCB5ZWFyIH07XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrSW5zaWdodHMgPSBjcmVhdGVGYWxsYmFja0luc2lnaHRzKGZhbGxiYWNrRGF0YSk7XG4gICAgICAgIGluc2lnaHRzLm92ZXJ2aWV3ID0gZmFsbGJhY2tJbnNpZ2h0cy5vdmVydmlldztcbiAgICAgICAgaW5zaWdodHMudG9wUGVyZm9ybWVyID0gZmFsbGJhY2tJbnNpZ2h0cy50b3BQZXJmb3JtZXI7XG4gICAgICAgIGluc2lnaHRzLnJlY29tbWVuZGF0aW9ucyA9IGZhbGxiYWNrSW5zaWdodHMucmVjb21tZW5kYXRpb25zO1xuICAgICAgICBpbnNpZ2h0cy5yaXNrcyA9IGZhbGxiYWNrSW5zaWdodHMucmlza3M7XG4gICAgICAgIGluc2lnaHRzLmRldGFpbGVkQW5hbHlzaXMgPSBmYWxsYmFja0luc2lnaHRzLmRldGFpbGVkQW5hbHlzaXM7XG4gICAgICAgIGluc2lnaHRzLnRyZW5kcyA9IGZhbGxiYWNrSW5zaWdodHMudHJlbmRzO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZW5lcmF0aW5nIEFJIGluc2lnaHRzIGZvciBhbGwgYnJhbmNoZXM6JywgZXJyb3IpO1xuICAgICAgLy8gRmFsbGJhY2sgdG8gYmFzaWMgYW5hbHlzaXMgaWYgQUkgZmFpbHNcbiAgICAgIGNvbnN0IGZhbGxiYWNrRGF0YSA9IHsgdG90YWxSZXZlbnVlLCBhdmdST0ksIGJyYW5jaDogJ2FsbCcsIHRpbWVEZXNjcmlwdGlvbiwgeWVhciB9O1xuICAgICAgY29uc3QgZmFsbGJhY2tJbnNpZ2h0cyA9IGNyZWF0ZUZhbGxiYWNrSW5zaWdodHMoZmFsbGJhY2tEYXRhKTtcbiAgICAgIGluc2lnaHRzLm92ZXJ2aWV3ID0gZmFsbGJhY2tJbnNpZ2h0cy5vdmVydmlldztcbiAgICAgIGluc2lnaHRzLnRvcFBlcmZvcm1lciA9IGZhbGxiYWNrSW5zaWdodHMudG9wUGVyZm9ybWVyO1xuICAgICAgaW5zaWdodHMucmVjb21tZW5kYXRpb25zID0gZmFsbGJhY2tJbnNpZ2h0cy5yZWNvbW1lbmRhdGlvbnM7XG4gICAgICBpbnNpZ2h0cy5yaXNrcyA9IGZhbGxiYWNrSW5zaWdodHMucmlza3M7XG4gICAgICBpbnNpZ2h0cy5kZXRhaWxlZEFuYWx5c2lzID0gZmFsbGJhY2tJbnNpZ2h0cy5kZXRhaWxlZEFuYWx5c2lzO1xuICAgICAgaW5zaWdodHMudHJlbmRzID0gZmFsbGJhY2tJbnNpZ2h0cy50cmVuZHM7XG4gICAgfVxuICAgIFxuICAgIC8vIEFJIHPhur0gdOG6oW8gdOG6pXQgY+G6oyBwaMOibiB0w61jaCBjaGkgdGnhur90XG4gIH1cblxuICAvLyBBSSBz4bq9IHThuqFvIHThuqV0IGPhuqMgcGjDom4gdMOtY2ggaGnhu4d1IHN14bqldFxuXG4gIC8vIEFJIHPhur0gdOG6oW8gdOG6pXQgY+G6oyDEkeG7gSB4deG6pXQgY2hp4bq/biBsxrDhu6NjXG5cbiAgLy8gQUkgc+G6vSB04bqhbyB04bqldCBj4bqjIMSR4buBIHh14bqldCB24buBIHBow6JuIGLhu5UgdsOgIHThu5FpIMawdSBow7NhXG5cbiAgLy8gQUkgc+G6vSB04bqhbyB04bqldCBj4bqjIHTDs20gdOG6r3RcblxuICAvLyBBSSBz4bq9IHThuqFvIHThuqV0IGPhuqMgcGjDom4gdMOtY2ggeHUgaMaw4bubbmdcblxuICAvLyBBSSBz4bq9IHThuqFvIHThuqV0IGPhuqMgY+G6o25oIGLDoW8gcuG7p2kgcm8gdsOgIMSR4buBIHh14bqldCB0w61jaCBj4buxY1xuXG4gIHJldHVybiBpbnNpZ2h0cztcbn1cblxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIkV4Y2VsQW5hbHl6ZXIiLCJHcm9xIiwiY2xlYW5Kc29uUmVzcG9uc2UiLCJzYWZlUGFyc2UiLCJJbnNpZ2h0c1NjaGVtYSIsImNyZWF0ZUZhbGxiYWNrSW5zaWdodHMiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwidGltZVR5cGUiLCJnZXQiLCJ0aW1lVmFsdWUiLCJicmFuY2giLCJ5ZWFyIiwiYW5hbHl6ZXIiLCJsb2FkU2FsZXNEYXRhIiwiZmlsdGVyZWREYXRhIiwiZ2V0QWxsRGF0YSIsIndlZWtOdW1iZXIiLCJwYXJzZUludCIsImlzTmFOIiwiZmlsdGVyIiwiaXRlbSIsIndlZWsiLCJxdWFydGVyIiwibW9udGgiLCJzdGFydFdlZWsiLCJlbmRXZWVrIiwidG90YWxSZXZlbnVlIiwicmVkdWNlIiwic3VtIiwidG90YWxfcmV2ZW51ZSIsInRvdGFsQWRDb3N0IiwiYWRfY29zdCIsImF2Z1JPSSIsImJyYW5jaEFuYWx5c2lzIiwiYnJhbmNoZXMiLCJBcnJheSIsImZyb20iLCJTZXQiLCJtYXAiLCJmb3JFYWNoIiwiYnJhbmNoTmFtZSIsImJyYW5jaERhdGEiLCJicmFuY2hSZXZlbnVlIiwiYnJhbmNoQWRDb3N0IiwiYnJhbmNoUk9JIiwicGVyY2VudGFnZSIsImxlbmd0aCIsInJldmVudWUiLCJhZENvc3QiLCJyb2kiLCJjaGFubmVsQW5hbHlzaXMiLCJjaGFubmVscyIsImNoYW5uZWwiLCJjaGFubmVsTmFtZSIsImNoYW5uZWxEYXRhIiwiY2hhbm5lbFJldmVudWUiLCJjaGFubmVsQWRDb3N0IiwiY2hhbm5lbFJPSSIsIndlZWtseUFuYWx5c2lzIiwid2Vla3MiLCJzb3J0IiwiYSIsImIiLCJ3ZWVrRGF0YSIsIndlZWtSZXZlbnVlIiwiYWlJbnNpZ2h0cyIsImdlbmVyYXRlQUlJbnNpZ2h0cyIsInJlc3BvbnNlIiwic3VtbWFyeSIsInRvdGFsUmV2ZW51ZUZvcm1hdHRlZCIsInRvTG9jYWxlU3RyaW5nIiwidG90YWxBZENvc3RGb3JtYXR0ZWQiLCJhdmdST0lGb3JtYXR0ZWQiLCJ0b0ZpeGVkIiwiZmlsdGVycyIsImpzb24iLCJlcnJvciIsImNvbnNvbGUiLCJzdGF0dXMiLCJnZW5lcmF0ZUdyb3FJbnNpZ2h0cyIsInByb21wdCIsInByb2Nlc3MiLCJlbnYiLCJHUk9RX0FQSV9LRVkiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5Iiwib3ZlcnZpZXciLCJ0b3BQZXJmb3JtZXIiLCJyZWNvbW1lbmRhdGlvbnMiLCJyaXNrcyIsImRldGFpbGVkQW5hbHlzaXMiLCJ0cmVuZHMiLCJncm9xIiwiYXBpS2V5IiwiY29tcGxldGlvbiIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1lc3NhZ2VzIiwicm9sZSIsImNvbnRlbnQiLCJtb2RlbCIsInRlbXBlcmF0dXJlIiwibWF4X3Rva2VucyIsInJlc3BvbnNlX2Zvcm1hdCIsInR5cGUiLCJjaG9pY2VzIiwibWVzc2FnZSIsImluY2x1ZGVzIiwiZ3JvcUVycm9yIiwiY29kZSIsImZhbGxiYWNrQ29tcGxldGlvbiIsImZhbGxiYWNrUmVzcG9uc2UiLCJmYWxsYmFja0Vycm9yIiwiZGF0YSIsImluc2lnaHRzIiwicGVyZm9ybWFuY2VNZXRyaWNzIiwicmV2ZW51ZUdyb3d0aCIsImVmZmljaWVuY3lTY29yZSIsIm1hcmtldFNoYXJlIiwiY29zdEVmZmVjdGl2ZW5lc3MiLCJhbGxST0lzIiwiT2JqZWN0IiwidmFsdWVzIiwiYWxsUmV2ZW51ZXMiLCJhbGxBZENvc3RzIiwiYXZnUk9JT3ZlcmFsbCIsIm1heFJPSSIsIk1hdGgiLCJtYXgiLCJtaW5ST0kiLCJtaW4iLCJyb2lTdGREZXYiLCJzcXJ0IiwicG93IiwiYXZnUmV2ZW51ZSIsInJldiIsIm1heFJldmVudWUiLCJtaW5SZXZlbnVlIiwiaGlnaFJPSVRocmVzaG9sZCIsImxvd1JPSVRocmVzaG9sZCIsImV4Y2VwdGlvbmFsUk9JVGhyZXNob2xkIiwiaGlnaFJldmVudWVUaHJlc2hvbGQiLCJsb3dSZXZlbnVlVGhyZXNob2xkIiwidGltZURlc2NyaXB0aW9uIiwiZmFsbGJhY2tEYXRhIiwiZmFsbGJhY2tJbnNpZ2h0cyIsInJldmVudWVQZXJEYXkiLCJhZENvc3RSYXRpbyIsInJvaVJhbmsiLCJyZXZlbnVlUmFuayIsInRvdGFsQnJhbmNoZXMiLCJwZXJmb3JtYW5jZUxldmVsIiwiYWlQcm9tcHQiLCJlbnRyaWVzIiwiam9pbiIsImFpUmVzcG9uc2UiLCJjbGVhblJlc3BvbnNlIiwicGFyc2VFcnJvciIsImxhc3RBdHRlbXB0IiwibWF0Y2hlcyIsIm1hdGNoIiwidmFsaWRNYXRjaGVzIiwibG9uZ2VzdE1hdGNoIiwic2Vjb25kRXJyb3IiLCJ2YWxpZGF0ZWRJbnNpZ2h0cyIsInBhcnNlIiwidmFsaWRhdGlvbkVycm9yIiwiYnJhbmNoQ291bnQiLCJrZXlzIiwiY2hhbm5lbENvdW50IiwicmV2ZW51ZURpc3RyaWJ1dGlvbiIsInJldmVudWVWYXJpYW5jZSIsInAiLCJkaXN0cmlidXRpb25UeXBlIiwiYWxsQnJhbmNoZXNQcm9tcHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/sales-dashboard/route.ts\n");

/***/ }),

/***/ "(rsc)/./utils/excel-analyzer.ts":
/*!*********************************!*\
  !*** ./utils/excel-analyzer.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ExcelAnalyzer: () => (/* binding */ ExcelAnalyzer)\n/* harmony export */ });\n/* harmony import */ var xlsx__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! xlsx */ \"(rsc)/./node_modules/xlsx/xlsx.mjs\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n\n\n\nclass ExcelAnalyzer {\n    async loadSalesData() {\n        const excelFiles = [\n            \"sales_Q1_2025_with_branch.xlsx\",\n            \"sales_Q2_2025_with_branch.xlsx\",\n            \"sales_Q3_2025_with_branch.xlsx\",\n            \"sales_Q4_2025_with_branch.xlsx\"\n        ];\n        for (const file of excelFiles){\n            try {\n                const filePath = path__WEBPACK_IMPORTED_MODULE_0___default().join(process.cwd(), file);\n                // Kiểm tra file có tồn tại không\n                if (!fs__WEBPACK_IMPORTED_MODULE_1___default().existsSync(filePath)) {\n                    console.error(`File not found: ${filePath}`);\n                    continue;\n                }\n                // Đọc file bằng fs.readFileSync\n                const buffer = fs__WEBPACK_IMPORTED_MODULE_1___default().readFileSync(filePath);\n                const workbook = xlsx__WEBPACK_IMPORTED_MODULE_2__.read(buffer, {\n                    type: \"buffer\"\n                });\n                const sheetName = workbook.SheetNames[0];\n                const worksheet = workbook.Sheets[sheetName];\n                const jsonData = xlsx__WEBPACK_IMPORTED_MODULE_2__.utils.sheet_to_json(worksheet);\n                // Transform data to our format\n                const transformedData = jsonData.map((row)=>({\n                        quarter: row.quarter,\n                        year: parseInt(row.year),\n                        week: parseInt(row.week),\n                        week_start_date: parseInt(row.week_start_date),\n                        channel: row.channel,\n                        branch: row.branch,\n                        total_revenue: parseFloat(row.total_revenue || 0),\n                        ad_cost: parseFloat(row.ad_cost || 0),\n                        roi: parseFloat(row.roi || 0)\n                    }));\n                this.salesData.push(...transformedData);\n                console.log(`Loaded ${transformedData.length} records from ${file}`);\n            } catch (error) {\n                console.error(`Error loading ${file}:`, error);\n            }\n        }\n    }\n    getWeeklyReport(targetWeek, targetYear = 2025) {\n        const filteredData = this.salesData.filter((item)=>item.week === targetWeek && item.year === targetYear);\n        const totalRevenue = filteredData.reduce((sum, item)=>sum + item.total_revenue, 0);\n        const totalAdCost = filteredData.reduce((sum, item)=>sum + item.ad_cost, 0);\n        const branchBreakdown = {};\n        const channelBreakdown = {};\n        const dailyRevenue = {};\n        filteredData.forEach((item)=>{\n            // Branch breakdown\n            branchBreakdown[item.branch] = (branchBreakdown[item.branch] || 0) + item.total_revenue;\n            // Channel breakdown\n            channelBreakdown[item.channel] = (channelBreakdown[item.channel] || 0) + item.total_revenue;\n            // Daily revenue (using week_start_date)\n            const dateKey = new Date((item.week_start_date - 25569) * 86400 * 1000).toISOString().split(\"T\")[0];\n            dailyRevenue[dateKey] = (dailyRevenue[dateKey] || 0) + item.total_revenue;\n        });\n        // Top performing branches by ROI\n        const branchROI = Object.keys(branchBreakdown).map((branch)=>{\n            const branchData = filteredData.filter((item)=>item.branch === branch);\n            const totalRevenue = branchData.reduce((sum, item)=>sum + item.total_revenue, 0);\n            const totalAdCost = branchData.reduce((sum, item)=>sum + item.ad_cost, 0);\n            const avgROI = totalAdCost > 0 ? totalRevenue / totalAdCost : 0;\n            return {\n                branch,\n                revenue: totalRevenue,\n                roi: avgROI\n            };\n        }).sort((a, b)=>b.roi - a.roi);\n        return {\n            week: `Tuần ${targetWeek}, ${targetYear}`,\n            totalRevenue,\n            branchBreakdown,\n            dailyRevenue,\n            topProducts: branchROI.slice(0, 5).map((item)=>({\n                    product: item.branch,\n                    revenue: item.revenue\n                })),\n            growthRate: totalAdCost > 0 ? totalRevenue / totalAdCost : 0\n        };\n    }\n    getDataStructure() {\n        if (this.salesData.length === 0) {\n            return {\n                message: \"No data loaded\"\n            };\n        }\n        const sample = this.salesData[0];\n        const uniqueBranches = Array.from(new Set(this.salesData.map((item)=>item.branch)));\n        const weekRange = {\n            start: this.salesData.reduce((min, item)=>item.week < min.week ? item : min).week,\n            end: this.salesData.reduce((max, item)=>item.week > max.week ? item : max).week\n        };\n        return {\n            totalRecords: this.salesData.length,\n            sampleRecord: sample,\n            branches: uniqueBranches,\n            weekRange,\n            fields: Object.keys(sample)\n        };\n    }\n    getAllData() {\n        return this.salesData;\n    }\n    constructor(){\n        this.salesData = [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dEIsSUFBSSxJQUFJLENBQUNuQyxTQUFTLENBQUNHLE1BQU0sS0FBSyxHQUFHO1lBQy9CLE9BQU87Z0JBQUVpQyxTQUFTO1lBQWlCO1FBQ3JDO1FBRUEsTUFBTUMsU0FBUyxJQUFJLENBQUNyQyxTQUFTLENBQUMsRUFBRTtRQUNoQyxNQUFNc0MsaUJBQWlCQyxNQUFNQyxJQUFJLENBQUMsSUFBSUMsSUFBSSxJQUFJLENBQUN6QyxTQUFTLENBQUNiLEdBQUcsQ0FBQ3NCLENBQUFBLE9BQVFBLEtBQUtkLE1BQU07UUFDaEYsTUFBTStDLFlBQVk7WUFDaEJDLE9BQU8sSUFBSSxDQUFDM0MsU0FBUyxDQUFDVyxNQUFNLENBQUMsQ0FBQ2lDLEtBQUtuQyxPQUNqQ0EsS0FBS2pCLElBQUksR0FBR29ELElBQUlwRCxJQUFJLEdBQUdpQixPQUFPbUMsS0FDOUJwRCxJQUFJO1lBQ05xRCxLQUFLLElBQUksQ0FBQzdDLFNBQVMsQ0FBQ1csTUFBTSxDQUFDLENBQUNtQyxLQUFLckMsT0FDL0JBLEtBQUtqQixJQUFJLEdBQUdzRCxJQUFJdEQsSUFBSSxHQUFHaUIsT0FBT3FDLEtBQzlCdEQsSUFBSTtRQUNSO1FBRUEsT0FBTztZQUNMdUQsY0FBYyxJQUFJLENBQUMvQyxTQUFTLENBQUNHLE1BQU07WUFDbkM2QyxjQUFjWDtZQUNkWSxVQUFVWDtZQUNWSTtZQUNBUSxRQUFRM0IsT0FBT0MsSUFBSSxDQUFDYTtRQUN0QjtJQUNGO0lBRUFjLGFBQTBCO1FBQ3hCLE9BQU8sSUFBSSxDQUFDbkQsU0FBUztJQUN2Qjs7YUF2SFFBLFlBQXlCLEVBQUU7O0FBd0hyQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWxlYXJuaW5nLXBsYXRmb3JtLy4vdXRpbHMvZXhjZWwtYW5hbHl6ZXIudHM/NzhmOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBYTFNYIGZyb20gJ3hsc3gnO1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcclxuaW1wb3J0IGZzIGZyb20gJ2ZzJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2FsZXNEYXRhIHtcclxuICBxdWFydGVyOiBzdHJpbmc7XHJcbiAgeWVhcjogbnVtYmVyO1xyXG4gIHdlZWs6IG51bWJlcjtcclxuICB3ZWVrX3N0YXJ0X2RhdGU6IG51bWJlcjtcclxuICBjaGFubmVsOiBzdHJpbmc7XHJcbiAgYnJhbmNoOiBzdHJpbmc7XHJcbiAgdG90YWxfcmV2ZW51ZTogbnVtYmVyO1xyXG4gIGFkX2Nvc3Q6IG51bWJlcjtcclxuICByb2k6IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBXZWVrbHlSZXBvcnQge1xyXG4gIHdlZWs6IHN0cmluZztcclxuICB0b3RhbFJldmVudWU6IG51bWJlcjtcclxuICBicmFuY2hCcmVha2Rvd246IHsgW2JyYW5jaDogc3RyaW5nXTogbnVtYmVyIH07XHJcbiAgZGFpbHlSZXZlbnVlOiB7IFtkYXRlOiBzdHJpbmddOiBudW1iZXIgfTtcclxuICB0b3BQcm9kdWN0cz86IEFycmF5PHsgcHJvZHVjdDogc3RyaW5nOyByZXZlbnVlOiBudW1iZXIgfT47XHJcbiAgZ3Jvd3RoUmF0ZT86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEV4Y2VsQW5hbHl6ZXIge1xyXG4gIHByaXZhdGUgc2FsZXNEYXRhOiBTYWxlc0RhdGFbXSA9IFtdO1xyXG5cclxuICBhc3luYyBsb2FkU2FsZXNEYXRhKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgZXhjZWxGaWxlcyA9IFtcclxuICAgICAgJ3NhbGVzX1ExXzIwMjVfd2l0aF9icmFuY2gueGxzeCcsXHJcbiAgICAgICdzYWxlc19RMl8yMDI1X3dpdGhfYnJhbmNoLnhsc3gnLCBcclxuICAgICAgJ3NhbGVzX1EzXzIwMjVfd2l0aF9icmFuY2gueGxzeCcsXHJcbiAgICAgICdzYWxlc19RNF8yMDI1X3dpdGhfYnJhbmNoLnhsc3gnXHJcbiAgICBdO1xyXG5cclxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBleGNlbEZpbGVzKSB7XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgZmlsZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gS2nhu4NtIHRyYSBmaWxlIGPDsyB04buTbiB04bqhaSBraMO0bmdcclxuICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZmlsZVBhdGgpKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBGaWxlIG5vdCBmb3VuZDogJHtmaWxlUGF0aH1gKTtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyDEkOG7jWMgZmlsZSBi4bqxbmcgZnMucmVhZEZpbGVTeW5jXHJcbiAgICAgICAgY29uc3QgYnVmZmVyID0gZnMucmVhZEZpbGVTeW5jKGZpbGVQYXRoKTtcclxuICAgICAgICBjb25zdCB3b3JrYm9vayA9IFhMU1gucmVhZChidWZmZXIsIHsgdHlwZTogJ2J1ZmZlcicgfSk7XHJcbiAgICAgICAgY29uc3Qgc2hlZXROYW1lID0gd29ya2Jvb2suU2hlZXROYW1lc1swXTtcclxuICAgICAgICBjb25zdCB3b3Jrc2hlZXQgPSB3b3JrYm9vay5TaGVldHNbc2hlZXROYW1lXTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBqc29uRGF0YSA9IFhMU1gudXRpbHMuc2hlZXRfdG9fanNvbih3b3Jrc2hlZXQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyYW5zZm9ybSBkYXRhIHRvIG91ciBmb3JtYXRcclxuICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZERhdGEgPSBqc29uRGF0YS5tYXAoKHJvdzogYW55KSA9PiAoe1xyXG4gICAgICAgICAgcXVhcnRlcjogcm93LnF1YXJ0ZXIsXHJcbiAgICAgICAgICB5ZWFyOiBwYXJzZUludChyb3cueWVhciksXHJcbiAgICAgICAgICB3ZWVrOiBwYXJzZUludChyb3cud2VlayksXHJcbiAgICAgICAgICB3ZWVrX3N0YXJ0X2RhdGU6IHBhcnNlSW50KHJvdy53ZWVrX3N0YXJ0X2RhdGUpLFxyXG4gICAgICAgICAgY2hhbm5lbDogcm93LmNoYW5uZWwsXHJcbiAgICAgICAgICBicmFuY2g6IHJvdy5icmFuY2gsXHJcbiAgICAgICAgICB0b3RhbF9yZXZlbnVlOiBwYXJzZUZsb2F0KHJvdy50b3RhbF9yZXZlbnVlIHx8IDApLFxyXG4gICAgICAgICAgYWRfY29zdDogcGFyc2VGbG9hdChyb3cuYWRfY29zdCB8fCAwKSxcclxuICAgICAgICAgIHJvaTogcGFyc2VGbG9hdChyb3cucm9pIHx8IDApXHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICB0aGlzLnNhbGVzRGF0YS5wdXNoKC4uLnRyYW5zZm9ybWVkRGF0YSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coYExvYWRlZCAke3RyYW5zZm9ybWVkRGF0YS5sZW5ndGh9IHJlY29yZHMgZnJvbSAke2ZpbGV9YCk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgbG9hZGluZyAke2ZpbGV9OmAsIGVycm9yKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0V2Vla2x5UmVwb3J0KHRhcmdldFdlZWs6IG51bWJlciwgdGFyZ2V0WWVhcjogbnVtYmVyID0gMjAyNSk6IFdlZWtseVJlcG9ydCB7XHJcbiAgICBjb25zdCBmaWx0ZXJlZERhdGEgPSB0aGlzLnNhbGVzRGF0YS5maWx0ZXIoaXRlbSA9PiBcclxuICAgICAgaXRlbS53ZWVrID09PSB0YXJnZXRXZWVrICYmIGl0ZW0ueWVhciA9PT0gdGFyZ2V0WWVhclxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCB0b3RhbFJldmVudWUgPSBmaWx0ZXJlZERhdGEucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIGl0ZW0udG90YWxfcmV2ZW51ZSwgMCk7XHJcbiAgICBjb25zdCB0b3RhbEFkQ29zdCA9IGZpbHRlcmVkRGF0YS5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgaXRlbS5hZF9jb3N0LCAwKTtcclxuICAgIFxyXG4gICAgY29uc3QgYnJhbmNoQnJlYWtkb3duOiB7IFticmFuY2g6IHN0cmluZ106IG51bWJlciB9ID0ge307XHJcbiAgICBjb25zdCBjaGFubmVsQnJlYWtkb3duOiB7IFtjaGFubmVsOiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xyXG4gICAgY29uc3QgZGFpbHlSZXZlbnVlOiB7IFtkYXRlOiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xyXG5cclxuICAgIGZpbHRlcmVkRGF0YS5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICAvLyBCcmFuY2ggYnJlYWtkb3duXHJcbiAgICAgIGJyYW5jaEJyZWFrZG93bltpdGVtLmJyYW5jaF0gPSAoYnJhbmNoQnJlYWtkb3duW2l0ZW0uYnJhbmNoXSB8fCAwKSArIGl0ZW0udG90YWxfcmV2ZW51ZTtcclxuICAgICAgXHJcbiAgICAgIC8vIENoYW5uZWwgYnJlYWtkb3duXHJcbiAgICAgIGNoYW5uZWxCcmVha2Rvd25baXRlbS5jaGFubmVsXSA9IChjaGFubmVsQnJlYWtkb3duW2l0ZW0uY2hhbm5lbF0gfHwgMCkgKyBpdGVtLnRvdGFsX3JldmVudWU7XHJcbiAgICAgIFxyXG4gICAgICAvLyBEYWlseSByZXZlbnVlICh1c2luZyB3ZWVrX3N0YXJ0X2RhdGUpXHJcbiAgICAgIGNvbnN0IGRhdGVLZXkgPSBuZXcgRGF0ZSgoaXRlbS53ZWVrX3N0YXJ0X2RhdGUgLSAyNTU2OSkgKiA4NjQwMCAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuICAgICAgZGFpbHlSZXZlbnVlW2RhdGVLZXldID0gKGRhaWx5UmV2ZW51ZVtkYXRlS2V5XSB8fCAwKSArIGl0ZW0udG90YWxfcmV2ZW51ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFRvcCBwZXJmb3JtaW5nIGJyYW5jaGVzIGJ5IFJPSVxyXG4gICAgY29uc3QgYnJhbmNoUk9JID0gT2JqZWN0LmtleXMoYnJhbmNoQnJlYWtkb3duKS5tYXAoYnJhbmNoID0+IHtcclxuICAgICAgY29uc3QgYnJhbmNoRGF0YSA9IGZpbHRlcmVkRGF0YS5maWx0ZXIoaXRlbSA9PiBpdGVtLmJyYW5jaCA9PT0gYnJhbmNoKTtcclxuICAgICAgY29uc3QgdG90YWxSZXZlbnVlID0gYnJhbmNoRGF0YS5yZWR1Y2UoKHN1bSwgaXRlbSkgPT4gc3VtICsgaXRlbS50b3RhbF9yZXZlbnVlLCAwKTtcclxuICAgICAgY29uc3QgdG90YWxBZENvc3QgPSBicmFuY2hEYXRhLnJlZHVjZSgoc3VtLCBpdGVtKSA9PiBzdW0gKyBpdGVtLmFkX2Nvc3QsIDApO1xyXG4gICAgICBjb25zdCBhdmdST0kgPSB0b3RhbEFkQ29zdCA+IDAgPyB0b3RhbFJldmVudWUgLyB0b3RhbEFkQ29zdCA6IDA7XHJcbiAgICAgIHJldHVybiB7IGJyYW5jaCwgcmV2ZW51ZTogdG90YWxSZXZlbnVlLCByb2k6IGF2Z1JPSSB9O1xyXG4gICAgfSkuc29ydCgoYSwgYikgPT4gYi5yb2kgLSBhLnJvaSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgd2VlazogYFR14bqnbiAke3RhcmdldFdlZWt9LCAke3RhcmdldFllYXJ9YCxcclxuICAgICAgdG90YWxSZXZlbnVlLFxyXG4gICAgICBicmFuY2hCcmVha2Rvd24sXHJcbiAgICAgIGRhaWx5UmV2ZW51ZSxcclxuICAgICAgdG9wUHJvZHVjdHM6IGJyYW5jaFJPSS5zbGljZSgwLCA1KS5tYXAoaXRlbSA9PiAoeyBwcm9kdWN0OiBpdGVtLmJyYW5jaCwgcmV2ZW51ZTogaXRlbS5yZXZlbnVlIH0pKSxcclxuICAgICAgZ3Jvd3RoUmF0ZTogdG90YWxBZENvc3QgPiAwID8gdG90YWxSZXZlbnVlIC8gdG90YWxBZENvc3QgOiAwXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZ2V0RGF0YVN0cnVjdHVyZSgpOiBhbnkge1xyXG4gICAgaWYgKHRoaXMuc2FsZXNEYXRhLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4geyBtZXNzYWdlOiAnTm8gZGF0YSBsb2FkZWQnIH07XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgc2FtcGxlID0gdGhpcy5zYWxlc0RhdGFbMF07XHJcbiAgICBjb25zdCB1bmlxdWVCcmFuY2hlcyA9IEFycmF5LmZyb20obmV3IFNldCh0aGlzLnNhbGVzRGF0YS5tYXAoaXRlbSA9PiBpdGVtLmJyYW5jaCkpKTtcclxuICAgIGNvbnN0IHdlZWtSYW5nZSA9IHtcclxuICAgICAgc3RhcnQ6IHRoaXMuc2FsZXNEYXRhLnJlZHVjZSgobWluLCBpdGVtKSA9PiBcclxuICAgICAgICBpdGVtLndlZWsgPCBtaW4ud2VlayA/IGl0ZW0gOiBtaW5cclxuICAgICAgKS53ZWVrLFxyXG4gICAgICBlbmQ6IHRoaXMuc2FsZXNEYXRhLnJlZHVjZSgobWF4LCBpdGVtKSA9PiBcclxuICAgICAgICBpdGVtLndlZWsgPiBtYXgud2VlayA/IGl0ZW0gOiBtYXhcclxuICAgICAgKS53ZWVrXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRvdGFsUmVjb3JkczogdGhpcy5zYWxlc0RhdGEubGVuZ3RoLFxyXG4gICAgICBzYW1wbGVSZWNvcmQ6IHNhbXBsZSxcclxuICAgICAgYnJhbmNoZXM6IHVuaXF1ZUJyYW5jaGVzLFxyXG4gICAgICB3ZWVrUmFuZ2UsXHJcbiAgICAgIGZpZWxkczogT2JqZWN0LmtleXMoc2FtcGxlKVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGdldEFsbERhdGEoKTogU2FsZXNEYXRhW10ge1xyXG4gICAgcmV0dXJuIHRoaXMuc2FsZXNEYXRhO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiWExTWCIsInBhdGgiLCJmcyIsIkV4Y2VsQW5hbHl6ZXIiLCJsb2FkU2FsZXNEYXRhIiwiZXhjZWxGaWxlcyIsImZpbGUiLCJmaWxlUGF0aCIsImpvaW4iLCJwcm9jZXNzIiwiY3dkIiwiZXhpc3RzU3luYyIsImNvbnNvbGUiLCJlcnJvciIsImJ1ZmZlciIsInJlYWRGaWxlU3luYyIsIndvcmtib29rIiwicmVhZCIsInR5cGUiLCJzaGVldE5hbWUiLCJTaGVldE5hbWVzIiwid29ya3NoZWV0IiwiU2hlZXRzIiwianNvbkRhdGEiLCJ1dGlscyIsInNoZWV0X3RvX2pzb24iLCJ0cmFuc2Zvcm1lZERhdGEiLCJtYXAiLCJyb3ciLCJxdWFydGVyIiwieWVhciIsInBhcnNlSW50Iiwid2VlayIsIndlZWtfc3RhcnRfZGF0ZSIsImNoYW5uZWwiLCJicmFuY2giLCJ0b3RhbF9yZXZlbnVlIiwicGFyc2VGbG9hdCIsImFkX2Nvc3QiLCJyb2kiLCJzYWxlc0RhdGEiLCJwdXNoIiwibG9nIiwibGVuZ3RoIiwiZ2V0V2Vla2x5UmVwb3J0IiwidGFyZ2V0V2VlayIsInRhcmdldFllYXIiLCJmaWx0ZXJlZERhdGEiLCJmaWx0ZXIiLCJpdGVtIiwidG90YWxSZXZlbnVlIiwicmVkdWNlIiwic3VtIiwidG90YWxBZENvc3QiLCJicmFuY2hCcmVha2Rvd24iLCJjaGFubmVsQnJlYWtkb3duIiwiZGFpbHlSZXZlbnVlIiwiZm9yRWFjaCIsImRhdGVLZXkiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzcGxpdCIsImJyYW5jaFJPSSIsIk9iamVjdCIsImtleXMiLCJicmFuY2hEYXRhIiwiYXZnUk9JIiwicmV2ZW51ZSIsInNvcnQiLCJhIiwiYiIsInRvcFByb2R1Y3RzIiwic2xpY2UiLCJwcm9kdWN0IiwiZ3Jvd3RoUmF0ZSIsImdldERhdGFTdHJ1Y3R1cmUiLCJtZXNzYWdlIiwic2FtcGxlIiwidW5pcXVlQnJhbmNoZXMiLCJBcnJheSIsImZyb20iLCJTZXQiLCJ3ZWVrUmFuZ2UiLCJzdGFydCIsIm1pbiIsImVuZCIsIm1heCIsInRvdGFsUmVjb3JkcyIsInNhbXBsZVJlY29yZCIsImJyYW5jaGVzIiwiZmllbGRzIiwiZ2V0QWxsRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./utils/excel-analyzer.ts\n");

/***/ }),

/***/ "(rsc)/./utils/insights-schema.ts":
/*!**********************************!*\
  !*** ./utils/insights-schema.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InsightsSchema: () => (/* binding */ InsightsSchema),\n/* harmony export */   createFallbackInsights: () => (/* binding */ createFallbackInsights)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/schemas.js\");\n\nconst InsightsSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    overview: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    topPerformer: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n    recommendations: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()),\n    risks: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()),\n    detailedAnalysis: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()),\n    trends: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\nfunction createFallbackInsights(data) {\n    const { totalRevenue, avgROI, branch, timeDescription, year } = data;\n    return {\n        overview: `Phân tích tổng quan hệ thống với doanh thu ${totalRevenue?.toLocaleString(\"vi-VN\") || \"N/A\"} VND và ROI ${avgROI?.toFixed(2) || \"N/A\"}.`,\n        topPerformer: \"Chi nh\\xe1nh c\\xf3 hiệu suất tốt nhất đang dẫn đầu về doanh thu v\\xe0 ROI\",\n        recommendations: [\n            \"Tối ưu h\\xf3a chi ph\\xed quảng c\\xe1o\",\n            \"Ph\\xe1t triển chiến lược k\\xeanh b\\xe1n h\\xe0ng\",\n            \"Cải thiện hiệu quả vận h\\xe0nh\"\n        ],\n        risks: [\n            \"Theo d\\xf5i xu hướng thị trường\",\n            \"Kiểm so\\xe1t rủi ro t\\xe0i ch\\xednh\",\n            \"Quản l\\xfd hiệu suất chi nh\\xe1nh\"\n        ],\n        detailedAnalysis: [\n            \"Ph\\xe2n t\\xedch hiệu quả chi nh\\xe1nh\",\n            \"Đ\\xe1nh gi\\xe1 ROI v\\xe0 chi ph\\xed\",\n            \"Xem x\\xe9t xu hướng tuần\",\n            \"Tối ưu h\\xf3a ph\\xe2n bổ nguồn lực\"\n        ],\n        trends: \"Xu hướng tăng trưởng ổn định với tiềm năng cải thiện\"\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi91dGlscy9pbnNpZ2h0cy1zY2hlbWEudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXdCO0FBRWpCLE1BQU1DLGlCQUFpQkQsdUNBQVEsQ0FBQztJQUNyQ0csVUFBVUgsdUNBQVE7SUFDbEJLLGNBQWNMLHVDQUFRO0lBQ3RCTSxpQkFBaUJOLHNDQUFPLENBQUNBLHVDQUFRO0lBQ2pDUSxPQUFPUixzQ0FBTyxDQUFDQSx1Q0FBUTtJQUN2QlMsa0JBQWtCVCxzQ0FBTyxDQUFDQSx1Q0FBUTtJQUNsQ1UsUUFBUVYsdUNBQVE7QUFDbEIsR0FBRztBQUlJLFNBQVNXLHVCQUF1QkMsSUFBUztJQUM5QyxNQUFNLEVBQUVDLFlBQVksRUFBRUMsTUFBTSxFQUFFQyxNQUFNLEVBQUVDLGVBQWUsRUFBRUMsSUFBSSxFQUFFLEdBQUdMO0lBRWhFLE9BQU87UUFDTFQsVUFBVSxDQUFDLDJDQUEyQyxFQUFFVSxjQUFjSyxlQUFlLFlBQVksTUFBTSxZQUFZLEVBQUVKLFFBQVFLLFFBQVEsTUFBTSxNQUFNLENBQUMsQ0FBQztRQUNuSmQsY0FBYztRQUNkQyxpQkFBaUI7WUFDZjtZQUNBO1lBQ0E7U0FDRDtRQUNERSxPQUFPO1lBQ0w7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsa0JBQWtCO1lBQ2hCO1lBQ0E7WUFDQTtZQUNBO1NBQ0Q7UUFDREMsUUFBUTtJQUNWO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1sZWFybmluZy1wbGF0Zm9ybS8uL3V0aWxzL2luc2lnaHRzLXNjaGVtYS50cz9lZGYwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5cbmV4cG9ydCBjb25zdCBJbnNpZ2h0c1NjaGVtYSA9IHoub2JqZWN0KHtcbiAgb3ZlcnZpZXc6IHouc3RyaW5nKCksXG4gIHRvcFBlcmZvcm1lcjogei5zdHJpbmcoKSxcbiAgcmVjb21tZW5kYXRpb25zOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICByaXNrczogei5hcnJheSh6LnN0cmluZygpKSxcbiAgZGV0YWlsZWRBbmFseXNpczogei5hcnJheSh6LnN0cmluZygpKSxcbiAgdHJlbmRzOiB6LnN0cmluZygpLFxufSk7XG5cbmV4cG9ydCB0eXBlIEluc2lnaHRzID0gei5pbmZlcjx0eXBlb2YgSW5zaWdodHNTY2hlbWE+O1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRmFsbGJhY2tJbnNpZ2h0cyhkYXRhOiBhbnkpOiBJbnNpZ2h0cyB7XG4gIGNvbnN0IHsgdG90YWxSZXZlbnVlLCBhdmdST0ksIGJyYW5jaCwgdGltZURlc2NyaXB0aW9uLCB5ZWFyIH0gPSBkYXRhO1xuICBcbiAgcmV0dXJuIHtcbiAgICBvdmVydmlldzogYFBow6JuIHTDrWNoIHThu5VuZyBxdWFuIGjhu4cgdGjhu5FuZyB24bubaSBkb2FuaCB0aHUgJHt0b3RhbFJldmVudWU/LnRvTG9jYWxlU3RyaW5nKCd2aS1WTicpIHx8ICdOL0EnfSBWTkQgdsOgIFJPSSAke2F2Z1JPST8udG9GaXhlZCgyKSB8fCAnTi9BJ30uYCxcbiAgICB0b3BQZXJmb3JtZXI6IFwiQ2hpIG5ow6FuaCBjw7MgaGnhu4d1IHN14bqldCB04buRdCBuaOG6pXQgxJFhbmcgZOG6q24gxJHhuqd1IHbhu4EgZG9hbmggdGh1IHbDoCBST0lcIixcbiAgICByZWNvbW1lbmRhdGlvbnM6IFtcbiAgICAgIFwiVOG7kWkgxrB1IGjDs2EgY2hpIHBow60gcXXhuqNuZyBjw6FvXCIsXG4gICAgICBcIlBow6F0IHRyaeG7g24gY2hp4bq/biBsxrDhu6NjIGvDqm5oIGLDoW4gaMOgbmdcIiwgXG4gICAgICBcIkPhuqNpIHRoaeG7h24gaGnhu4d1IHF14bqjIHbhuq1uIGjDoG5oXCJcbiAgICBdLFxuICAgIHJpc2tzOiBbXG4gICAgICBcIlRoZW8gZMO1aSB4dSBoxrDhu5tuZyB0aOG7iyB0csaw4budbmdcIixcbiAgICAgIFwiS2nhu4NtIHNvw6F0IHLhu6dpIHJvIHTDoGkgY2jDrW5oXCIsXG4gICAgICBcIlF14bqjbiBsw70gaGnhu4d1IHN14bqldCBjaGkgbmjDoW5oXCJcbiAgICBdLFxuICAgIGRldGFpbGVkQW5hbHlzaXM6IFtcbiAgICAgIFwiUGjDom4gdMOtY2ggaGnhu4d1IHF14bqjIGNoaSBuaMOhbmhcIixcbiAgICAgIFwixJDDoW5oIGdpw6EgUk9JIHbDoCBjaGkgcGjDrVwiLFxuICAgICAgXCJYZW0geMOpdCB4dSBoxrDhu5tuZyB0deG6p25cIixcbiAgICAgIFwiVOG7kWkgxrB1IGjDs2EgcGjDom4gYuG7lSBuZ3Xhu5NuIGzhu7FjXCJcbiAgICBdLFxuICAgIHRyZW5kczogXCJYdSBoxrDhu5tuZyB0xINuZyB0csaw4bufbmcg4buVbiDEkeG7i25oIHbhu5tpIHRp4buBbSBuxINuZyBj4bqjaSB0aGnhu4duXCJcbiAgfTtcbn1cbiJdLCJuYW1lcyI6WyJ6IiwiSW5zaWdodHNTY2hlbWEiLCJvYmplY3QiLCJvdmVydmlldyIsInN0cmluZyIsInRvcFBlcmZvcm1lciIsInJlY29tbWVuZGF0aW9ucyIsImFycmF5Iiwicmlza3MiLCJkZXRhaWxlZEFuYWx5c2lzIiwidHJlbmRzIiwiY3JlYXRlRmFsbGJhY2tJbnNpZ2h0cyIsImRhdGEiLCJ0b3RhbFJldmVudWUiLCJhdmdST0kiLCJicmFuY2giLCJ0aW1lRGVzY3JpcHRpb24iLCJ5ZWFyIiwidG9Mb2NhbGVTdHJpbmciLCJ0b0ZpeGVkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./utils/insights-schema.ts\n");

/***/ }),

/***/ "(rsc)/./utils/json-cleaner.ts":
/*!*******************************!*\
  !*** ./utils/json-cleaner.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   cleanJsonResponse: () => (/* binding */ cleanJsonResponse),\n/* harmony export */   extractBalancedJson: () => (/* binding */ extractBalancedJson),\n/* harmony export */   safeParse: () => (/* binding */ safeParse)\n/* harmony export */ });\n/* harmony import */ var json5__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! json5 */ \"(rsc)/./node_modules/json5/dist/index.mjs\");\n\nfunction extractBalancedJson(raw) {\n    const start = raw.indexOf(\"{\");\n    const end = raw.lastIndexOf(\"}\");\n    if (start === -1 || end === -1) throw new Error(\"No braces\");\n    let slice = raw.slice(start, end + 1);\n    return slice.replace(/,(\\s*[}\\]])/g, \"$1\") // bỏ dấu , cuối mảng/object\n    .replace(/\\n/g, \" \") // xoá newline thừa\n    .replace(/\\s{2,}/g, \" \"); // xoá space thừa\n}\nfunction safeParse(raw) {\n    return json5__WEBPACK_IMPORTED_MODULE_0__[\"default\"].parse(raw);\n}\nfunction cleanJsonResponse(response) {\n    let cleanResponse = response.trim();\n    // Remove common prefixes that AI might add\n    const prefixesToRemove = [\n        \"Here is the detailed analysis in Vietnamese:\",\n        \"Here is the detailed analysis in JSON format:\",\n        \"Here is the JSON output:\",\n        \"Here is the analysis:\",\n        \"Here's the JSON:\",\n        \"Here is th\",\n        \"Here is\",\n        \"JSON:\",\n        \"Output:\",\n        \"Result:\",\n        \"Analysis:\",\n        \"Response:\",\n        \"Note:\",\n        \"As a Chief Strategy Officer\"\n    ];\n    for (const prefix of prefixesToRemove){\n        if (cleanResponse.startsWith(prefix)) {\n            cleanResponse = cleanResponse.substring(prefix.length).trim();\n        }\n    }\n    // More aggressive cleaning - remove any text before the first {\n    const firstBrace = cleanResponse.indexOf(\"{\");\n    if (firstBrace > 0) {\n        cleanResponse = cleanResponse.substring(firstBrace);\n    }\n    // Remove any text after the last }\n    const lastBrace = cleanResponse.lastIndexOf(\"}\");\n    if (lastBrace > 0 && lastBrace < cleanResponse.length - 1) {\n        cleanResponse = cleanResponse.substring(0, lastBrace + 1);\n    }\n    // Handle markdown code blocks\n    if (cleanResponse.includes(\"```json\")) {\n        cleanResponse = cleanResponse.split(\"```json\")[1].split(\"```\")[0].trim();\n    } else if (cleanResponse.includes(\"```\")) {\n        // Find all code blocks and take the longest one\n        const codeBlocks = cleanResponse.match(/```([\\s\\S]*?)```/g);\n        if (codeBlocks && codeBlocks.length > 0) {\n            const longestBlock = codeBlocks.reduce((a, b)=>a.length > b.length ? a : b);\n            cleanResponse = longestBlock.replace(/```/g, \"\").trim();\n        }\n    }\n    // Clean up common JSON format issues\n    cleanResponse = cleanResponse.replace(/[\\u0000-\\u001F\\u007F-\\u009F]/g, \"\") // Remove control characters\n    .replace(/fakihuyongfakihuyongfakihuyong/g, \"\") // Remove repeated text\n    .replace(/otecungfakihuyongfakihuyong/g, \"\") // Remove more repeated text\n    .trim();\n    // Truncate if too long to prevent JSON parsing errors\n    if (cleanResponse.length > 5000) {\n        console.log(\"Response too long, truncating...\");\n        // Try to find the last complete JSON field before truncation\n        const lastCompleteField = cleanResponse.lastIndexOf('\",', 5000);\n        if (lastCompleteField > 0) {\n            cleanResponse = cleanResponse.substring(0, lastCompleteField + 1) + \"}\";\n        } else {\n            cleanResponse = cleanResponse.substring(0, 5000) + '\"}';\n        }\n    }\n    // Final safety check - if it doesn't start with {, make it JSON\n    if (!cleanResponse.startsWith(\"{\")) {\n        console.log(\"Response does not start with {, creating fallback JSON\");\n        throw new Error(\"Invalid JSON format\");\n    }\n    // Validate JSON structure before parsing\n    const braceCount = (cleanResponse.match(/\\{/g) || []).length;\n    const closeBraceCount = (cleanResponse.match(/\\}/g) || []).length;\n    if (braceCount !== closeBraceCount) {\n        console.log(\"Unmatched braces detected, creating fallback JSON\");\n        throw new Error(\"Invalid JSON structure\");\n    }\n    // Check for incomplete JSON fields\n    const quoteCount = (cleanResponse.match(/\"/g) || []).length;\n    if (quoteCount % 2 !== 0) {\n        console.log(\"Unmatched quotes detected, creating fallback JSON\");\n        throw new Error(\"Invalid JSON structure - unmatched quotes\");\n    }\n    // Check for common JSON issues and fix them\n    if (cleanResponse.includes(\"Nh\\xf3\") || cleanResponse.includes(\"fakihuyong\") || cleanResponse.includes(\"otecung\")) {\n        console.log(\"Detected problematic text in JSON, creating fallback JSON\");\n        throw new Error(\"Invalid JSON content\");\n    }\n    // Check for repetitive patterns that indicate corrupted response\n    const repetitivePatterns = [\n        /Nhó Nhó Nhó/,\n        /fakihuyongfakihuyong/,\n        /otecungotecung/,\n        /Nhó Nhó Nhó Nhó/\n    ];\n    for (const pattern of repetitivePatterns){\n        if (pattern.test(cleanResponse)) {\n            console.log(\"Detected repetitive pattern in JSON, creating fallback JSON\");\n            throw new Error(\"Invalid JSON content - repetitive pattern\");\n        }\n    }\n    // Check for incomplete JSON (missing closing brace)\n    if (!cleanResponse.endsWith(\"}\")) {\n        console.log(\"Incomplete JSON detected, creating fallback JSON\");\n        throw new Error(\"Invalid JSON structure - incomplete\");\n    }\n    return cleanResponse;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU07SUFDbEI7SUFFQSxPQUFPTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktbGVhcm5pbmctcGxhdGZvcm0vLi91dGlscy9qc29uLWNsZWFuZXIudHM/YjFjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSlNPTjUgZnJvbSBcImpzb241XCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0QmFsYW5jZWRKc29uKHJhdzogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc3RhcnQgPSByYXcuaW5kZXhPZihcIntcIik7XG4gIGNvbnN0IGVuZCA9IHJhdy5sYXN0SW5kZXhPZihcIn1cIik7XG4gIGlmIChzdGFydCA9PT0gLTEgfHwgZW5kID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gYnJhY2VzXCIpO1xuICBsZXQgc2xpY2UgPSByYXcuc2xpY2Uoc3RhcnQsIGVuZCArIDEpO1xuXG4gIHJldHVybiBzbGljZVxuICAgIC5yZXBsYWNlKC8sKFxccypbfVxcXV0pL2csIFwiJDFcIikgIC8vIGLhu48gZOG6pXUgLCBjdeG7kWkgbeG6o25nL29iamVjdFxuICAgIC5yZXBsYWNlKC9cXG4vZywgXCIgXCIpICAgICAgICAgICAgIC8vIHhvw6EgbmV3bGluZSB0aOG7q2FcbiAgICAucmVwbGFjZSgvXFxzezIsfS9nLCBcIiBcIik7ICAgICAgICAvLyB4b8OhIHNwYWNlIHRo4burYVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2FmZVBhcnNlPFQ+KHJhdzogc3RyaW5nKTogVCB7XG4gIHJldHVybiBKU09ONS5wYXJzZShyYXcpIGFzIFQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbkpzb25SZXNwb25zZShyZXNwb25zZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgbGV0IGNsZWFuUmVzcG9uc2UgPSByZXNwb25zZS50cmltKCk7XG4gIFxuICAvLyBSZW1vdmUgY29tbW9uIHByZWZpeGVzIHRoYXQgQUkgbWlnaHQgYWRkXG4gIGNvbnN0IHByZWZpeGVzVG9SZW1vdmUgPSBbXG4gICAgJ0hlcmUgaXMgdGhlIGRldGFpbGVkIGFuYWx5c2lzIGluIFZpZXRuYW1lc2U6JyxcbiAgICAnSGVyZSBpcyB0aGUgZGV0YWlsZWQgYW5hbHlzaXMgaW4gSlNPTiBmb3JtYXQ6JyxcbiAgICAnSGVyZSBpcyB0aGUgSlNPTiBvdXRwdXQ6JyxcbiAgICAnSGVyZSBpcyB0aGUgYW5hbHlzaXM6JyxcbiAgICAnSGVyZVxcJ3MgdGhlIEpTT046JyxcbiAgICAnSGVyZSBpcyB0aCcsXG4gICAgJ0hlcmUgaXMnLFxuICAgICdKU09OOicsXG4gICAgJ091dHB1dDonLFxuICAgICdSZXN1bHQ6JyxcbiAgICAnQW5hbHlzaXM6JyxcbiAgICAnUmVzcG9uc2U6JyxcbiAgICAnTm90ZTonLFxuICAgICdBcyBhIENoaWVmIFN0cmF0ZWd5IE9mZmljZXInXG4gIF07XG4gIFxuICBmb3IgKGNvbnN0IHByZWZpeCBvZiBwcmVmaXhlc1RvUmVtb3ZlKSB7XG4gICAgaWYgKGNsZWFuUmVzcG9uc2Uuc3RhcnRzV2l0aChwcmVmaXgpKSB7XG4gICAgICBjbGVhblJlc3BvbnNlID0gY2xlYW5SZXNwb25zZS5zdWJzdHJpbmcocHJlZml4Lmxlbmd0aCkudHJpbSgpO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gTW9yZSBhZ2dyZXNzaXZlIGNsZWFuaW5nIC0gcmVtb3ZlIGFueSB0ZXh0IGJlZm9yZSB0aGUgZmlyc3Qge1xuICBjb25zdCBmaXJzdEJyYWNlID0gY2xlYW5SZXNwb25zZS5pbmRleE9mKCd7Jyk7XG4gIGlmIChmaXJzdEJyYWNlID4gMCkge1xuICAgIGNsZWFuUmVzcG9uc2UgPSBjbGVhblJlc3BvbnNlLnN1YnN0cmluZyhmaXJzdEJyYWNlKTtcbiAgfVxuICBcbiAgLy8gUmVtb3ZlIGFueSB0ZXh0IGFmdGVyIHRoZSBsYXN0IH1cbiAgY29uc3QgbGFzdEJyYWNlID0gY2xlYW5SZXNwb25zZS5sYXN0SW5kZXhPZignfScpO1xuICBpZiAobGFzdEJyYWNlID4gMCAmJiBsYXN0QnJhY2UgPCBjbGVhblJlc3BvbnNlLmxlbmd0aCAtIDEpIHtcbiAgICBjbGVhblJlc3BvbnNlID0gY2xlYW5SZXNwb25zZS5zdWJzdHJpbmcoMCwgbGFzdEJyYWNlICsgMSk7XG4gIH1cbiAgXG4gIC8vIEhhbmRsZSBtYXJrZG93biBjb2RlIGJsb2Nrc1xuICBpZiAoY2xlYW5SZXNwb25zZS5pbmNsdWRlcygnYGBganNvbicpKSB7XG4gICAgY2xlYW5SZXNwb25zZSA9IGNsZWFuUmVzcG9uc2Uuc3BsaXQoJ2BgYGpzb24nKVsxXS5zcGxpdCgnYGBgJylbMF0udHJpbSgpO1xuICB9IGVsc2UgaWYgKGNsZWFuUmVzcG9uc2UuaW5jbHVkZXMoJ2BgYCcpKSB7XG4gICAgLy8gRmluZCBhbGwgY29kZSBibG9ja3MgYW5kIHRha2UgdGhlIGxvbmdlc3Qgb25lXG4gICAgY29uc3QgY29kZUJsb2NrcyA9IGNsZWFuUmVzcG9uc2UubWF0Y2goL2BgYChbXFxzXFxTXSo/KWBgYC9nKTtcbiAgICBpZiAoY29kZUJsb2NrcyAmJiBjb2RlQmxvY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGxvbmdlc3RCbG9jayA9IGNvZGVCbG9ja3MucmVkdWNlKChhLCBiKSA9PiBhLmxlbmd0aCA+IGIubGVuZ3RoID8gYSA6IGIpO1xuICAgICAgY2xlYW5SZXNwb25zZSA9IGxvbmdlc3RCbG9jay5yZXBsYWNlKC9gYGAvZywgJycpLnRyaW0oKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIENsZWFuIHVwIGNvbW1vbiBKU09OIGZvcm1hdCBpc3N1ZXNcbiAgY2xlYW5SZXNwb25zZSA9IGNsZWFuUmVzcG9uc2VcbiAgICAucmVwbGFjZSgvW1xcdTAwMDAtXFx1MDAxRlxcdTAwN0YtXFx1MDA5Rl0vZywgJycpIC8vIFJlbW92ZSBjb250cm9sIGNoYXJhY3RlcnNcbiAgICAucmVwbGFjZSgvZmFraWh1eW9uZ2Zha2lodXlvbmdmYWtpaHV5b25nL2csICcnKSAvLyBSZW1vdmUgcmVwZWF0ZWQgdGV4dFxuICAgIC5yZXBsYWNlKC9vdGVjdW5nZmFraWh1eW9uZ2Zha2lodXlvbmcvZywgJycpIC8vIFJlbW92ZSBtb3JlIHJlcGVhdGVkIHRleHRcbiAgICAudHJpbSgpO1xuICBcbiAgLy8gVHJ1bmNhdGUgaWYgdG9vIGxvbmcgdG8gcHJldmVudCBKU09OIHBhcnNpbmcgZXJyb3JzXG4gIGlmIChjbGVhblJlc3BvbnNlLmxlbmd0aCA+IDUwMDApIHtcbiAgICBjb25zb2xlLmxvZygnUmVzcG9uc2UgdG9vIGxvbmcsIHRydW5jYXRpbmcuLi4nKTtcbiAgICAvLyBUcnkgdG8gZmluZCB0aGUgbGFzdCBjb21wbGV0ZSBKU09OIGZpZWxkIGJlZm9yZSB0cnVuY2F0aW9uXG4gICAgY29uc3QgbGFzdENvbXBsZXRlRmllbGQgPSBjbGVhblJlc3BvbnNlLmxhc3RJbmRleE9mKCdcIiwnLCA1MDAwKTtcbiAgICBpZiAobGFzdENvbXBsZXRlRmllbGQgPiAwKSB7XG4gICAgICBjbGVhblJlc3BvbnNlID0gY2xlYW5SZXNwb25zZS5zdWJzdHJpbmcoMCwgbGFzdENvbXBsZXRlRmllbGQgKyAxKSArICd9JztcbiAgICB9IGVsc2Uge1xuICAgICAgY2xlYW5SZXNwb25zZSA9IGNsZWFuUmVzcG9uc2Uuc3Vic3RyaW5nKDAsIDUwMDApICsgJ1wifSc7XG4gICAgfVxuICB9XG4gIFxuICAvLyBGaW5hbCBzYWZldHkgY2hlY2sgLSBpZiBpdCBkb2Vzbid0IHN0YXJ0IHdpdGggeywgbWFrZSBpdCBKU09OXG4gIGlmICghY2xlYW5SZXNwb25zZS5zdGFydHNXaXRoKCd7JykpIHtcbiAgICBjb25zb2xlLmxvZygnUmVzcG9uc2UgZG9lcyBub3Qgc3RhcnQgd2l0aCB7LCBjcmVhdGluZyBmYWxsYmFjayBKU09OJyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEpTT04gZm9ybWF0Jyk7XG4gIH1cbiAgXG4gIC8vIFZhbGlkYXRlIEpTT04gc3RydWN0dXJlIGJlZm9yZSBwYXJzaW5nXG4gIGNvbnN0IGJyYWNlQ291bnQgPSAoY2xlYW5SZXNwb25zZS5tYXRjaCgvXFx7L2cpIHx8IFtdKS5sZW5ndGg7XG4gIGNvbnN0IGNsb3NlQnJhY2VDb3VudCA9IChjbGVhblJlc3BvbnNlLm1hdGNoKC9cXH0vZykgfHwgW10pLmxlbmd0aDtcbiAgaWYgKGJyYWNlQ291bnQgIT09IGNsb3NlQnJhY2VDb3VudCkge1xuICAgIGNvbnNvbGUubG9nKCdVbm1hdGNoZWQgYnJhY2VzIGRldGVjdGVkLCBjcmVhdGluZyBmYWxsYmFjayBKU09OJyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEpTT04gc3RydWN0dXJlJyk7XG4gIH1cbiAgXG4gIC8vIENoZWNrIGZvciBpbmNvbXBsZXRlIEpTT04gZmllbGRzXG4gIGNvbnN0IHF1b3RlQ291bnQgPSAoY2xlYW5SZXNwb25zZS5tYXRjaCgvXCIvZykgfHwgW10pLmxlbmd0aDtcbiAgaWYgKHF1b3RlQ291bnQgJSAyICE9PSAwKSB7XG4gICAgY29uc29sZS5sb2coJ1VubWF0Y2hlZCBxdW90ZXMgZGV0ZWN0ZWQsIGNyZWF0aW5nIGZhbGxiYWNrIEpTT04nKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgSlNPTiBzdHJ1Y3R1cmUgLSB1bm1hdGNoZWQgcXVvdGVzJyk7XG4gIH1cbiAgXG4gIC8vIENoZWNrIGZvciBjb21tb24gSlNPTiBpc3N1ZXMgYW5kIGZpeCB0aGVtXG4gIGlmIChjbGVhblJlc3BvbnNlLmluY2x1ZGVzKCdOaMOzJykgfHwgY2xlYW5SZXNwb25zZS5pbmNsdWRlcygnZmFraWh1eW9uZycpIHx8IGNsZWFuUmVzcG9uc2UuaW5jbHVkZXMoJ290ZWN1bmcnKSkge1xuICAgIGNvbnNvbGUubG9nKCdEZXRlY3RlZCBwcm9ibGVtYXRpYyB0ZXh0IGluIEpTT04sIGNyZWF0aW5nIGZhbGxiYWNrIEpTT04nKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgSlNPTiBjb250ZW50Jyk7XG4gIH1cbiAgXG4gIC8vIENoZWNrIGZvciByZXBldGl0aXZlIHBhdHRlcm5zIHRoYXQgaW5kaWNhdGUgY29ycnVwdGVkIHJlc3BvbnNlXG4gIGNvbnN0IHJlcGV0aXRpdmVQYXR0ZXJucyA9IFtcbiAgICAvTmjDsyBOaMOzIE5ow7MvLFxuICAgIC9mYWtpaHV5b25nZmFraWh1eW9uZy8sXG4gICAgL290ZWN1bmdvdGVjdW5nLyxcbiAgICAvTmjDsyBOaMOzIE5ow7MgTmjDsy9cbiAgXTtcbiAgXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiByZXBldGl0aXZlUGF0dGVybnMpIHtcbiAgICBpZiAocGF0dGVybi50ZXN0KGNsZWFuUmVzcG9uc2UpKSB7XG4gICAgICBjb25zb2xlLmxvZygnRGV0ZWN0ZWQgcmVwZXRpdGl2ZSBwYXR0ZXJuIGluIEpTT04sIGNyZWF0aW5nIGZhbGxiYWNrIEpTT04nKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBKU09OIGNvbnRlbnQgLSByZXBldGl0aXZlIHBhdHRlcm4nKTtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIENoZWNrIGZvciBpbmNvbXBsZXRlIEpTT04gKG1pc3NpbmcgY2xvc2luZyBicmFjZSlcbiAgaWYgKCFjbGVhblJlc3BvbnNlLmVuZHNXaXRoKCd9JykpIHtcbiAgICBjb25zb2xlLmxvZygnSW5jb21wbGV0ZSBKU09OIGRldGVjdGVkLCBjcmVhdGluZyBmYWxsYmFjayBKU09OJyk7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEpTT04gc3RydWN0dXJlIC0gaW5jb21wbGV0ZScpO1xuICB9XG4gIFxuICByZXR1cm4gY2xlYW5SZXNwb25zZTtcbn1cbiJdLCJuYW1lcyI6WyJKU09ONSIsImV4dHJhY3RCYWxhbmNlZEpzb24iLCJyYXciLCJzdGFydCIsImluZGV4T2YiLCJlbmQiLCJsYXN0SW5kZXhPZiIsIkVycm9yIiwic2xpY2UiLCJyZXBsYWNlIiwic2FmZVBhcnNlIiwicGFyc2UiLCJjbGVhbkpzb25SZXNwb25zZSIsInJlc3BvbnNlIiwiY2xlYW5SZXNwb25zZSIsInRyaW0iLCJwcmVmaXhlc1RvUmVtb3ZlIiwicHJlZml4Iiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsImxlbmd0aCIsImZpcnN0QnJhY2UiLCJsYXN0QnJhY2UiLCJpbmNsdWRlcyIsInNwbGl0IiwiY29kZUJsb2NrcyIsIm1hdGNoIiwibG9uZ2VzdEJsb2NrIiwicmVkdWNlIiwiYSIsImIiLCJjb25zb2xlIiwibG9nIiwibGFzdENvbXBsZXRlRmllbGQiLCJicmFjZUNvdW50IiwiY2xvc2VCcmFjZUNvdW50IiwicXVvdGVDb3VudCIsInJlcGV0aXRpdmVQYXR0ZXJucyIsInBhdHRlcm4iLCJ0ZXN0IiwiZW5kc1dpdGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./utils/json-cleaner.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/xlsx","vendor-chunks/formdata-node","vendor-chunks/groq-sdk","vendor-chunks/zod","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/json5","vendor-chunks/webidl-conversions","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsales-dashboard%2Froute&page=%2Fapi%2Fsales-dashboard%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsales-dashboard%2Froute.ts&appDir=D%3A%5CSales%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CSales&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();